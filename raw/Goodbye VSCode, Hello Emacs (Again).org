#+TITLE: Goodbye VSCode, Hello Emacs (Again)
#+URL: https://hotair.tech/blog/goodbye-vscode/
#+AUTHOR: lujun9972
#+TAGS: raw
#+DATE: [2018年 09月 17日 星期一 17:35:57 HKT]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t n:nil ::t |:t ^:nil -:nil f:t *:t <:nil
Some months ago I decided to reorient my development career from the DevOps space to web
几个月前，我决定将我的开发生涯从DevOps转向web
development with JavaScript. I at first tried to apply my editor of choice
开发使用JavaScript。起初，我试着申请我的编辑选择
([[https://www.gnu.org/software/emacs/][emacs]])but was continually frustrated by
([[https://www.gnu.org/software/emacs/][emacs]])
the mediocre support for working with JavaScript, particularly compared to
对使用JavaScript的平庸支持，特别是与
Python. After wasting at least a day trying to get my Emacs config to support basic completion and syntax checking in JavaScript I came across the blog post [[https://swizec.com/blog/vscode-better-editor-emacs/swizec/7921][10 Years
Python。在花了至少一天的时间试图让我的Emacs配置支持JavaScript中的基本完成和语法检查之后，我看到了这篇博客文章[[https://swizec.com/blog/vsco-emacs/swizec/7921][10年]
of love for Emacs Undone by one week of
对Emacs的爱在一周后就消失了
VSCode]]. The
VSCode]]。的
title really struck me as I have spent exactly 10 years with Emacs myself. I decided
我和Emacs一起度过了整整10年，这个头衔真的让我印象深刻。我决定
to top swimming upstream and jump wholeheartedly into VS Code. It has been a mixed experience.
游到上游，全身心投入VS代码。这是一个复杂的经历。

I was instantly struck how amazing VS Code's support is for the JavaScript
我立即被VS代码对JavaScript的支持所震惊
language, libraries, and the web environment. Every tutorial on react, Vue.js, Electron, you name it, recommends using VS Code. My VS Code experience became even better when I
语言、库和web环境。关于react的所有教程，Vue。电子，你能想到的，建议使用VS代码。我的VS代码经验变得更好，当我
learned to drop =//@ts-check= in every file. VS Code's language support is so
学会在每个文件中删除=//@ts-check=。VS代码的语言支持就是这样
awesome that I highly doubt any other editor will ever seriously compete with it
太棒了，我非常怀疑还有其他的编辑会和它竞争
in that regard. At the same time, I hit a pretty significant pain point
在这方面。与此同时，我遇到了一个非常严重的痛点
instantly. I use emacs keybindings everywhere, in the shell, browser, you name
立即。我在任何地方都使用emacs键绑定，在shell中、浏览器中、您能想到的地方
it. On OS X, [[https://pqrs.org/osx/karabiner/][Karabiner]] mapped those bindings
它。在OS X上，[[https://pqrs.org/osx/karabiner/][Karabiner]]映射了这些绑定
for me and now on linux laptop with GNOME it is a top-level feature. In VS Code
对于我和现在使用GNOME的linux膝上型电脑来说，这是一个顶级特性。在VS代码
I found that I was constantly closing the editor accidentally or deleting a
我发现我经常不小心关闭编辑器或删除
text in a buffer with the most common commands that I use thousands of times a
文本在缓冲区中与最常见的命令，我使用了数千次a
day. Here are just a few. I probably have >100 in muscle memory.
的一天。这里有一些。我可能有>100的肌肉记忆。

- M-f forward word
- M-f向前的字
- M-b backward word
- M-b倒写字
- C-w cut text
- C-w剪切文本
- M-w copy text
- M-w复制文本
- C-SPACE start a selection
- c空间开始选择
- C-a beginning line
- c开头的线
- C-e end of line
- C-e结束线
- M-a back paragraph
-后面一段
- M-e forward paragraph
- M-e前段
- C-s search forward
- C-s搜索前进
- C-j Change buffer
- C-j更改缓冲区
- and many more
——还有更多

I found an [[https://github.com/SebastianZaha/vscode-emacs-friendly][emacs plugin for VS Code]] but it only muddled the situation memory as it only supported some
我找到了一个[[https://github.com/sebastianzaha/vscodeemacs -friendly][emacs插件的VS代码]]，但它只是混乱的情况内存，因为它只支持一些
commands and then with annoying bugs that made the plugin more trouble than it was worth.
命令，然后是恼人的bug，让插件变得比它本身更麻烦。

I dropped the emacs plugin and tried to do things the VS Code way. It only kind of worked for me but I soon encountered more hurdles. As a developer, there is a whole set of things we do that are project-related tasks such as:
我放弃了emacs插件，尝试用VS代码的方式来做事情。这对我来说是可行的，但我很快就遇到了更多的障碍。作为一名开发人员，我们有一整套与项目相关的任务，比如:

- Working with git
-使用git
- Renaming files, moving them around
-重命名文件，移动它们
- Maintaining a personal TODO list and logging errors, troubleshooting information in a personal log
-维护个人待办事项列表和记录错误，排除个人日志中的故障信息
- Executing shell commands
-执行shell命令
- Writing documentation in markdown, ReST, asciidoc
-在markdown, ReST, asciidoc中编写文档

While VS Code likely has some support for these, I found the VS Code plugins in these areas lacking
虽然VS代码可能对这些有一些支持，但我发现VS代码插件在这些方面有所欠缺
when I tried them. For example, I found jumping between projects with [[https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager][Project Manager]] very poor in comparison to Emacs' incredible [[https://github.com/bbatsov/projectile][Projectile]]. It is important to note that the Project Manager addon may have improved significantly since I last used it a few months ago. The existing git addons also pale in comparison to Emacs' fantastic [[https://magit.vc/][git interface]]. [[https://github.com/abo-abo/swiper/blob/master/counsel.el#L1222][counsel-git-grep]] across a huge codebase truly is a superpower.
当我尝试的时候。例如，我发现与Emacs的incredible [[https://marketplace.visualstudio.com/items?需要注意的是，自从我几个月前最后一次使用项目经理插件以来，它可能已经有了很大的改进。现有的git插件与Emacs的神奇插件相比也相形见绌。vc /] [git接口]]。[[https://github.com/abo-abo/swiper/blob/master/advis.el# L1222]]跨越巨大的代码库确实是一个超级大国。

<https://youtu.be/AgRsYOJi6ao>
< https://youtu.be/AgRsYOJi6ao >

I am one of those crazy people that runs a terminal inside of emacs. I even have a keybinding (M-j) that
我是那些在emacs内部运行终端的疯子之一。我甚至有一个键绑定(M-j)
I use to toggle between character and line mode in the terminal. VS Code's terminal is OK but nothing to write home about.
我用来在终端的字符和行模式之间切换。VS代码的终端是好的，但没有什么值得写的。

I use Emacs [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html][dired]] mode for manipulating files and directories. It works ridiculously well.
我使用Emacs [[https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html][dired]]模式来操作文件和目录。它的效果好得可笑。

More than magit, projectile, dired, I missed emacs' [[https://oremacs.com/swiper/][ivy]] completion framework more than anything else. You really have to see it to believe it.
除了magit、射弹、dired，我最想念的是emacs的[[https://oremacs.com/swiper/][ivy]]完成框架。你必须亲眼看到才能相信。

<https://youtu.be/VvnJQpTFVDc>
< https://youtu.be/VvnJQpTFVDc >

So while I could use VS Code for writing JavaScript, I still found myself spending 30-50% of my work time in Emacs. The mismatch between keybindings in VSCode and rest of my tools just kept tying my fingers in knots.
因此，虽然我可以使用VS代码来编写JavaScript，但我仍然发现自己在Emacs上花费了30-50%的工作时间。VSCode中的键绑定与我的其他工具之间的不匹配一直让我手忙脚乱。

So far I have talked a whole lot about the Emacs features that I miss in VS Code. But surely, you ask, won't VS Code implement all of those features even better than Emacs given the VS Code teams extensive developer resources? Maybe, but I would be surprised if they did. I doubt the VS Code team intends to give it a kitchen sink of capabilities that we see in Emacs.
到目前为止，我已经讲了很多关于我在VS代码中遗漏的Emacs特性。但是，您肯定会问，如果VS代码团队拥有大量的开发人员资源，那么VS代码难道不会比Emacs更好地实现所有这些特性吗?也许吧，但如果他们这么做了，我会很惊讶。我怀疑VS代码团队是否打算提供我们在Emacs中看到的功能。

After one month, I decided to reinvestigate using Emacs for JavaScript. I came upon the awesome [[https://github.com/ananthakumaran/tide][Tide-mode]]. It took me about a day but I got it working to my satisfaction. It does not hold a candle to VS Code but it provides me enough features to be productive in JavaScript.
一个月后，我决定重新研究使用Emacs编写JavaScript。我发现了一个很棒的[[https://github.com/ananthakumaran/tide][潮汐模式]]。这花了我大约一天的时间，但我得到了我满意的工作。它比不上VS代码，但它为我提供了足够的特性来提高JavaScript的效率。

Some of the features tide-mode provides:
潮汐模式提供的一些功能:

- auto-completion (via company-mode)
-自动完成(通过公司模式)
- linting
——产品毛羽
- syntax-checking (together w/ flycheck)
-语法检查(w/ flycheck)
- documentation at point
-文件记录
- basic refactoring
——基本重构

Here is tide-mode in action
这是潮汐模式

[[https://i.imgur.com/jEwgPsd.gif]]
[[https://i.imgur.com/jEwgPsd.gif]]

A few notes on using tide-mode:
使用潮汐模式的注意事项:

1. You have to drop a jsconfig.json (for JavaScript) or tsconfig.json (for TypeScript) into your project in order to use it.
1. 您必须删除一个jsconfig。json(用于JavaScript)或tsconfig。json(用于TypeScript)到您的项目中，以便使用它。
2. You have to install typescript into your projects for it to work optimally. As it leverages the =tsserver= that ships with TypeScript. Note that it does not need to be a project dependency. You can install it thus with =npm install typescript=
2. 你必须将typescript安装到你的项目中，才能让它最佳工作。它利用TypeScript附带的=tsserver=。注意，它不需要是一个项目依赖项。您可以通过=npm install typescript=来安装它
3. I am using Emacs 26. Not sure how well this works with Emacs 25
3.我正在使用Emacs 26。不确定这与Emacs 25的工作效果如何
4. I haven't found a good way to fully support JSX in files with a regular =.js= extension. So far I have simply renamed any file containing JSX to =.jsx= in order to get web-mode + tide-mode to work properly.
4. 我还没有找到一个好方法来完全支持文件中的带正则=的JSX。js =扩展。到目前为止，我只是重命名了包含JSX to =的任何文件。jsx=为了使web模式+潮汐模式正常工作。

I may be mistaken but I believe the =tsserver= that ships with TypeScript was developed by the same team that makes VS Code. It is not without irony that the Emacs mode I am using to replace of VS Code depends on software developed by the VS Code team.
我可能搞错了，但是我相信TypeScript附带的=tsserver=是由开发VS代码的团队开发的。具有讽刺意味的是，我用来替代VS代码的Emacs模式依赖于VS代码团队开发的软件。

VS Code is an excellent IDE and I would recommend any new software developer to use it. But with the excellent tide-mode, I no longer need to.
VS代码是一个优秀的IDE，我建议任何新的软件开发人员使用它。但随着优秀的潮汐模式，我不再需要。

You can find my emacs configuration for JavaScript [[https://github.com/bryanwb/dotfiles/blob/master/emacs.d/init.el#L845-L909][here]].
您可以在这里找到我的emacs JavaScript配置[[https://github.com/bryanwb/dotfiles/blob/master/emacs.d/init.el#L845-L909]]。

P.S. I haven't figured out a great solutions for the following and would love to hear from you the readers.
附言:我还没有想出一个很好的解决办法，我很想听听读者们的意见。

- Debugging - I still use VS Code but have looked into [[https://github.com/GoogleChromeLabs/ndb][ndb]]. Don't know yet if it is a worthy replacement.
调试-我仍然使用VS代码，但已经查看了[[https://github.com/GoogleChromeLabs/ndb][ndb]]。还不知道它是否值得替换。
- HTML element, css attribute completion - One of my favorite things about VS Code is that it supports completion and inline documentation for CSS and HTML, technologies that I know pathetically little about.
- HTML元素，css属性完成- VS代码中我最喜欢的一点是它支持css和HTML的完成和内联文档，这些技术我知之甚少。
- Browsing Mozilla, CSS documentation within Emacs - anyone have a good solution for this? iirc helm-dash has something useful here but I haven's seriously investigated it.
-浏览Mozilla, CSS文档内的Emacs -谁有一个很好的解决方案?iirc helm-dash有一些有用的东西，但我还没有认真研究过。
- Auto-completion, linting for Flow - I don't use flow so I have been able to skip this so far but I very much would like to browse and contribute to the desktop application for [[https://ledger.fr][Ledger]] and it uses Flow extensively.
-自动完成，流的linting -我不使用流，所以我能够跳过这个到目前为止，但我非常想浏览和贡献的桌面应用程序[[https://ledger.fr][总账]]和它广泛使用流。

P.P.S. Thanks so much to [[https://ananthakumaran.in/][Anantha Kumaran]] for his work on tide-mode w/out which I would be stuck in VS Code.
非常感谢[[https://ananthakumaran]。在/][阿纳塔库马兰]]他的工作潮汐模式w/out，我将在VS代码卡住。

Update: below is the magic incantation that I used in my web-mode configuration to get jsx syntax highlighting in regular =.js= files
更新:下面是我在web模式配置中使用的咒语，它可以在regular =中高亮显示jsx语法。js文件=

#+BEGIN_EXAMPLE
(setq web-mode-content-types-alist
'(("jsx" . "\.js[x]?\'")))
#+END_EXAMPLE
