#+TITLE: A style-check.rb flycheck checker in Emacs
#+URL: https://www.macs.hw.ac.uk/~rs46/posts/2018-12-29-stylecheck-flycheck.html
#+AUTHOR: lujun9972
#+TAGS: raw
#+DATE: [2019年 02月 11日 星期一 15:38:49 HKT]
#+LANGUAGE:  zh-CN
#+OPTIONS:  H:6 num:nil toc:t n:nil ::t |:t ^:nil -:nil f:t *:t <:nil

This post shows how to integrate [[https://www.cs.umd.edu/~nspring/software/style-check-readme.html][style-check.rb]] with [[https://www.flycheck.org][flycheck]] in the Emacs text editor.
这篇文章展示了如何在Emacs文本编辑器中集成[[https://www.cs.umd.edu/~nspring/ software/stylecheck.rb]]和[[https://www.flycheck.org][flycheck]]。

style-check.rb checks:
style-check。rb检查:

- Syntax
——语法
- Correct capitalisation
-正确资本化
- Phrases e.g. “few in number” → “few”
-短语，例如:" few in number "→" few "
- Spellings
——拼写
- Ignored latex commands
-忽略latex命令
- Latex source checks e.g. a
-乳胶来源检查，例如a
tag should precede (not follow) a period
标签应该在句号之前(而不是之后)

* Example screenshot
*例子截图
:PROPERTIES:
属性:
:CUSTOM_ID: example-screenshot
:CUSTOM_ID example-screenshot
:END:
结束:

When the style-check.rb flychecker checker is functional, an example Flycheck Errors buffer is:
当style-check。检查是功能，一个例子Flycheck错误缓冲区是:

[[https://www.macs.hw.ac.uk/~rs46/images/site/style-check-flycheck.jpg]]
[[https://www.macs.hw.ac.uk/ rs46 /图片/网站/ style-check-flycheck.jpg]]

* style-check.rb installation
* style-check。rb安装
:PROPERTIES:
属性:
:CUSTOM_ID: style-check.rb-installation
:CUSTOM_ID style-check.rb-installation
:END:
结束:

Download from [[https://www.cs.umd.edu/~nspring/software/style-check-readme.html]].
下载从[[https://www.cs.umd.edu/ ~ nspring /软件/ style-check-readme.html]]。

To test =style-check.rb=, create a =test.tex= file containing:
测试= style-check。rb=，创建一个=test。特克斯=文件包含:

#+BEGIN_EXAMPLE
documentclass{article}
begin{document}
section{Heading}
The way in which.
end{document}
#+END_EXAMPLE

Then test =style-check.rb= (use the correct filepath):
然后测试= style-check。rb=(使用正确的文件路径):

#+BEGIN_EXAMPLE
/path/to/style-check.rb test.tex
#+END_EXAMPLE

It should output:
它应该输出:

#+BEGIN_EXAMPLE
test.tex:4:1: The way in which. (The way in which)
#+END_EXAMPLE

* flycheck integration
* flycheck集成
:PROPERTIES:
属性:
:CUSTOM_ID: flycheck-integration
:CUSTOM_ID flycheck-integration
:END:
结束:

Put the following in your =~/.emacs=, =~/.emacs.el=, or =~/.emacs.d/init.el= (or whatever) file.
在你的=~/中填入下列内容。emacs =, = ~ / . emacs。el =、= ~ / .emacs.d / init。el=(或其他)文件。

Edit the path to =style-check.rb=.
编辑路径到=style-check.rb=。

#+BEGIN_EXAMPLE
(require 'flycheck)
(flycheck-define-checker style-check
"A linter for style-check.rb"
:command ("/path/to/style-check.rb"
source-inplace)
:error-patterns
((warning line-start (file-name) ":" line ":" column ": "
(message (one-or-more not-newline)
(zero-or-more "n" (any " ") (one-or-more not-newline)))
line-end))
:modes latex-mode
)
(add-to-list 'flycheck-checkers 'style-check)
#+END_EXAMPLE

Enable flycheck for latex-mode:
开启latex模式的flycheck:

#+BEGIN_EXAMPLE
(add-hook 'latex-mode-hook 'flycheck-mode)
#+END_EXAMPLE

=style-check.rb= will be executed against the latex content when you open a =.tex= file. Each time you save changes, =style-check.rb= will be executed.
= style-check。打开a =时，将对乳胶含量执行rb=。特克斯=文件。每次保存更改时，=style-check。将被执行。

Display the textlint warnings for =file.txt= in a Flycheck errors buffer with: =C-c ! l= .
显示=file的textlint警告。txt=在一个Flycheck错误缓冲区:=C-c !l =。

*Debugging* If flycheck errors buffer shows no warnings, debug =style-check.rb= by running =C-c ! C-c= which will run =style-check.rb= in a new buffer, showing the raw output from =style-check.rb=.
如果flycheck错误缓冲区没有显示警告，debug =style-check。rb=通过运行=C-c !C-c=将运行=样式检查。在一个新的缓冲区中显示=style-check.rb=的原始输出。

* Chaining other latex checkers
*链接其他乳胶检查器
:PROPERTIES:
属性:
:CUSTOM_ID: chaining-other-latex-checkers
:CUSTOM_ID chaining-other-latex-checkers
:END:
结束:

Flycheck can execute multiple checkers on a single file. For example, using the [[./2018-12-25-textlint-flycheck.html][textlint flycheck check]] in conjunction with this style-check.rb checker. To do this in your Emacs init file (e.g. =~/.init.el=), define the textlint checker then modify the style-check.rb checker to include:
Flycheck可以在一个文件上执行多个检查器。例如，使用[[./2018-12-25-textlint-flycheck。html][textlint flycheck检查]]结合这个样式检查。rb检查器。要在Emacs init文件中执行此操作(例如=~/.init.el=)，请定义textlint检查器，然后修改样式检查。rb检查程序包括:

#+BEGIN_EXAMPLE
:next-checkers ((warning . textlint))
#+END_EXAMPLE


Flycheck will now list warnings from both checkers.
Flycheck现在将列出来自两个检查器的警告。

A potential drawback of chaining checkers is multiple warnings about the same error from different checkers, e.g. spelling, phrasing or capitalisation.
链接检查器的一个潜在缺点是来自不同检查器的相同错误的多个警告，例如拼写、语法或大小写。

*Acknowledgement*
*确认*

Thanks to Blair Archibald for feedback on a draft of this post.
感谢Blair Archibald对本文草稿的反馈。
