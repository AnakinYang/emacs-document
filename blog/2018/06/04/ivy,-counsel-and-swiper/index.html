<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ivy, Counsel and Swiper - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Ivy, Counsel and Swiper</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org121eea9">1 What is Ivy?</a></li>
<li><a href="#orgc2d4898">2 Installation</a></li>
<li><a href="#orgac4d444">3 Usage</a>
<ul>
<li><a href="#org932cd86">3.1 Keybindings</a></li>
</ul>
</li>
<li><a href="#org13b1c6d">4 Demo</a>
<ul>
<li><a href="#org29359ae">4.1 Actions</a></li>
</ul>
</li>
<li><a href="#org2d4e119">5 Counsel</a>
<ul>
<li><a href="#org0be1c7d">5.1 Useful Commands</a></li>
<li><a href="#org5467c13">5.2 Extending Counsel</a></li>
</ul>
</li>
<li><a href="#org01d3391">6 MELPA</a></li>
<li><a href="#org2a0607f">7 Swiper</a></li>
<li><a href="#org799b785">8 Ivy versus Helm</a></li>
<li><a href="#org75d9679">9 Resources</a></li>
<li><a href="#org8062af4">Footnotes:</a>
<ul>
<li><a href="#org098e07b">fn.1</a></li>
<li><a href="#org3600bdb">fn.2</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc3a2f04" class="outline-2">
<h2 id="org121eea9"><a id="orgc3a2f04"></a>1 What is Ivy?</h2>
<div class="outline-text-2" id="text-org121eea9">
<p>
Ivy is a completion framework, similar to Helm. When downloading
Ivy, it comes with Counsel and Swiper, which we'll get to in a
minute. Ivy doesn't try to do too many things, instead it provides
an interface to list, search, filter and perform actions on a
collection of "things". These "things" can range from strings to
buffers, Ivy doesn't really care. It just provides a way for the
user to interact with this collection.
</p>
</div>
</div>

<div id="outline-container-orgbfd1025" class="outline-2">
<h2 id="orgc2d4898"><a id="orgbfd1025"></a>2 Installation</h2>
<div class="outline-text-2" id="text-orgc2d4898">
<p>
Install Ivy via MELPA. If you're unsure what MELPA is or its
enabled, checkout <a href="http://melpa.milkbox.net/#/getting-started">http://melpa.milkbox.net/#/getting-started</a>. Once
MELPA is added to your package archives, run
</p>

<pre class="example">
M-x package-install counsel
</pre>

<p>
Installing Counsel will bring in Ivy and Swiper as dependencies.
</p>
</div>
</div>

<div id="outline-container-org052f5ac" class="outline-2">
<h2 id="orgac4d444"><a id="org052f5ac"></a>3 Usage</h2>
<div class="outline-text-2" id="text-orgac4d444">
<p>
Enable Ivy via <code>ivy-mode</code> (or <code>(ivy-mode 1)</code> in your Emacs file) and
you're set! Issue the <code>execute-extended-command</code> (default keybinding
is <code>M-x</code>) or <code>switch-to-buffer</code> (default keybinding is <code>C-x b</code>) and
you'll notice the difference. Without any setup, Ivy has already
worked its way into some of Emacs' commands.^{<a href="#org098e07b">1</a>}
</p>


<div class="figure">
<p><img src="files/m-x-usage.gif" alt="m-x-usage.gif" />
</p>
</div>

<p>
While Ivy works without any configuration there are a couple of
lines the maintainers suggest everyone throw in their Emacs'
file.^{<a href="#org3600bdb">2</a>}
</p>

<pre class="example">
(use-package ivy :demand
:config
(setq ivy-use-virtual-buffers t
ivy-count-format "%d/%d "))
</pre>

<dl class="org-dl">
<dt><code>ivy-use-virtual-buffers</code></dt><dd>Add recent files and bookmarks to the
<code>ivy-switch-buffer</code></dd>
<dt><code>ivy-count-format</code></dt><dd>Displays the current and total number in the
collection in the prompt</dd>
</dl>

<p>
There are a number of other configurations available. Checkout the
documentation (listed in Resources) or if you have Ivy installed,
play around using <code>M-x customize-group ivy</code>.
</p>

<p>
Amazing stuff and we've just touched the tip of the iceberg. We can
extend the functionality of Ivy to allow us to perform several
different actions on our list. We'll go into how to add these
actions in the <a href="#org13b1c6d">Demo</a> section and then see how we can take advantage
of some ready-to-use actions in the <a href="#org2d4e119">Counsel</a> section.
</p>
</div>

<div id="outline-container-org431e368" class="outline-3">
<h3 id="org932cd86"><a id="org431e368"></a>3.1 Keybindings</h3>
<div class="outline-text-3" id="text-org932cd86">
<p>
When a Ivy minibuffer is active, the following keybindings are
active
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Key</th>
<th scope="col" class="org-left">Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>M-n</code></td>
<td class="org-left"><code>ivy-next-line</code></td>
<td class="org-left">Next line</td>
</tr>

<tr>
<td class="org-left"><code>M-p</code></td>
<td class="org-left"><code>ivy-previous-line</code></td>
<td class="org-left">Previous line</td>
</tr>

<tr>
<td class="org-left"><code>M-&lt;</code></td>
<td class="org-left"><code>ivy-beginning-of-buffer</code></td>
<td class="org-left">Beginning of the Ivy minibuffer</td>
</tr>

<tr>
<td class="org-left"><code>M-&gt;</code></td>
<td class="org-left"><code>ivy-end-of-buffer</code></td>
<td class="org-left">End of the Ivy minibuffer</td>
</tr>

<tr>
<td class="org-left"><code>C-v</code></td>
<td class="org-left"><code>ivy-scroll-up-command</code></td>
<td class="org-left">Page up by one Ivy buffer size</td>
</tr>

<tr>
<td class="org-left"><code>M-v</code></td>
<td class="org-left"><code>ivy-scroll-down-command</code></td>
<td class="org-left">Page down by one Ivy buffer size</td>
</tr>

<tr>
<td class="org-left"><code>C-m</code> or <code>RET</code></td>
<td class="org-left"><code>ivy-done</code></td>
<td class="org-left">Calls the default action</td>
</tr>

<tr>
<td class="org-left"><code>C-M-m</code></td>
<td class="org-left"><code>ivy-call</code></td>
<td class="org-left">Calls the default action, keeps Ivy open</td>
</tr>

<tr>
<td class="org-left"><code>M-o</code></td>
<td class="org-left"><code>ivy-dispatching-done</code></td>
<td class="org-left">Displays the available actions</td>
</tr>

<tr>
<td class="org-left"><code>C-M-o</code></td>
<td class="org-left"><code>ivy-dispacthing-call</code></td>
<td class="org-left">Displays available actions, keeps Ivy open</td>
</tr>

<tr>
<td class="org-left"><code>C-'</code></td>
<td class="org-left"><code>ivy-avy</code></td>
<td class="org-left">Uses Avy to select candidates</td>
</tr>

<tr>
<td class="org-left"><code>TAB</code></td>
<td class="org-left"><code>ivy-partial-or-done</code></td>
<td class="org-left">Tab completion, repeated presses may call done</td>
</tr>

<tr>
<td class="org-left"> </td>
<td class="org-left"><code>ivy-resume</code></td>
<td class="org-left">Restart Ivy before last action</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org8ab1b57" class="outline-2">
<h2 id="org13b1c6d"><a id="org8ab1b57"></a>4 Demo</h2>
<div class="outline-text-2" id="text-org13b1c6d">
<p>
Ivy is simple to work with. To demonstrate this, we'll attempt
to make a simplified version of the buffer list using Ivy.
</p>

<pre class="example">
(ivy-read "My buffers: " (mapcar #'buffer-name (buffer-list)))
</pre>

<p>
Just like that we have a, albeit rather useless, buffer list that
works with Ivy. Notice the list of buffers contracts and expands
depending on our input. However selecting a candidate does
nothing. Lets get it to do something.
</p>
</div>

<div id="outline-container-orgd5e0bd5" class="outline-3">
<h3 id="org29359ae"><a id="orgd5e0bd5"></a>4.1 Actions</h3>
<div class="outline-text-3" id="text-org29359ae">
<p>
The <code>ivy-read</code> function takes a number of optional keyword
arguments after the collection of results. We won't be covering all
of them here, but we'll take a look at the <code>:actions</code> keyword.
</p>

<p>
Actions invoke a function on the selected candidate. The default
action is bound to <code>RET</code> but you can give more. When working in the
Ivy minibuffer, hit <code>M-o</code> to see available actions. Lets add an
action to our previous example.
</p>

<pre class="example">
(ivy-read "My buffers: "
(mapcar #'buffer-name (buffer-list))
:action '(1 ;; index (1 based) of the default action
("s" (lambda (x)
(switch-to-buffer x)) "switch")))
</pre>

<p>
Now if we try it again, selecting a candidate will open the buffer.
</p>
</div>
</div>
</div>

<div id="outline-container-orgd639517" class="outline-2">
<h2 id="org2d4e119"><a id="orgd639517"></a>5 Counsel</h2>
<div class="outline-text-2" id="text-org2d4e119">
<p>
To keep concerns separated, Ivy doesn't have a lot of other
functionality. That's where Counsel comes in. Counsel comes with Ivy
and provides some useful commands, such as <code>counsel-M-x</code> and
<code>counsel-find-file</code>.
</p>

<p>
These functions use the <code>ivy-read</code> function and provide useful
actions on the selection candidate. An action is function that is
preformed on the selected candidate. Try invoking an action (the
default keybinding is <code>C-o</code> when inside the Ivy minibuffer) on
several of the Counsel commands.
</p>


<div class="figure">
<p><img src="files/action.gif" alt="action.gif" />
</p>
</div>
</div>

<div id="outline-container-org510df6a" class="outline-3">
<h3 id="org0be1c7d"><a id="org510df6a"></a>5.1 Useful Commands</h3>
<div class="outline-text-3" id="text-org0be1c7d">
<p>
Even though you have most of what you need to go off and extend Ivy
to your little heart desires, its worth seeing what Counsel has to
offer as its done a lot of things for you.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Command</th>
<th scope="col" class="org-left">Actions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>counsel-find-file</code></td>
<td class="org-left">Open externally, open other window, ...</td>
</tr>

<tr>
<td class="org-left"><code>counsel=M-x</code></td>
<td class="org-left">Find symbol, describe function</td>
</tr>

<tr>
<td class="org-left"><code>counsel-describe-function</code></td>
<td class="org-left">Open definition, find symbol</td>
</tr>

<tr>
<td class="org-left"><code>counsel-describe-variable</code></td>
<td class="org-left">Open definition, find symbol</td>
</tr>

<tr>
<td class="org-left"><code>counsel-find-library</code></td>
<td class="org-left">No additional actions, jumps to library/feature</td>
</tr>

<tr>
<td class="org-left"><code>counsel-info-lookup-symbol</code></td>
<td class="org-left">No additional actions, jumps to symbol definition</td>
</tr>
</tbody>
</table>

<p>
The following commands rely on external programs
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Command</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>counsel-git</code></td>
<td class="org-left">Open externally, open other window (if in git repository)</td>
</tr>

<tr>
<td class="org-left"><code>counsel-git-grep</code></td>
<td class="org-left">No actions, greps string (if in git repository)</td>
</tr>

<tr>
<td class="org-left"><code>counsel-ag</code></td>
<td class="org-left">No actions, uses ag to search strings across files</td>
</tr>

<tr>
<td class="org-left"><code>counsel-locate</code></td>
<td class="org-left">Open externally, dired</td>
</tr>

<tr>
<td class="org-left"><code>counsel-rythmbox</code></td>
<td class="org-left"> </td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org5f81cb6" class="outline-3">
<h3 id="org5467c13"><a id="org5f81cb6"></a>5.2 Extending Counsel</h3>
<div class="outline-text-3" id="text-org5467c13">
<p>
Suppose after reading this you decide Ivy is the greatest thing
since sliced bread and you need it. You install it and are happy
but you really want to be able to delete files when perusing your
file system using <code>counsel-find-file</code>. No worries, we can add that.
</p>

<pre class="example">
(ivy-set-actions
'counsel-find-file
'(("d" delete-file "delete")))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6b6c036" class="outline-2">
<h2 id="org01d3391"><a id="org6b6c036"></a>6 MELPA</h2>
<div class="outline-text-2" id="text-org01d3391">
<p>
There are a few Ivy/Counsel packages available through MELPA
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Package Name</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>counsel-bbdb</code></td>
<td class="org-left">Quick search &amp; input email from BBDB</td>
</tr>

<tr>
<td class="org-left"><code>counsel-dash</code></td>
<td class="org-left">Browse Dash docsets</td>
</tr>

<tr>
<td class="org-left"><code>counsel-gtags</code></td>
<td class="org-left">Interface for GNU Global tagging</td>
</tr>

<tr>
<td class="org-left"><code>counsel-osx-app</code></td>
<td class="org-left">Launch OSX application from Ivy</td>
</tr>

<tr>
<td class="org-left"><code>counsel-projectile</code></td>
<td class="org-left">Integration with Projectile (manage and navigate projects)</td>
</tr>

<tr>
<td class="org-left"><code>ivy-gitlab</code></td>
<td class="org-left">Gitlab integration</td>
</tr>

<tr>
<td class="org-left"><code>ivy-rich</code></td>
<td class="org-left">Different interface for Ivy's switch buffer</td>
</tr>

<tr>
<td class="org-left"><code>ivy-todo</code></td>
<td class="org-left">Manage org TODOs via Ivy</td>
</tr>

<tr>
<td class="org-left"><code>ivy-youtube</code></td>
<td class="org-left">Query YouTube and play videos in the browser</td>
</tr>

<tr>
<td class="org-left"><code>flyspell-correct-ivy</code></td>
<td class="org-left">Flyspell interface for Ivy</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgaf779ad" class="outline-2">
<h2 id="org2a0607f"><a id="orgaf779ad"></a>7 Swiper</h2>
<div class="outline-text-2" id="text-org2a0607f">
<p>
Swiper is an easy way to search through the current buffer. Very
similar to Helm's swoop package.
</p>


<div class="figure">
<p><img src="files/swiper.gif" alt="swiper.gif" />
</p>
</div>
</div>
</div>

<div id="outline-container-org556f569" class="outline-2">
<h2 id="org799b785"><a id="org556f569"></a>8 Ivy versus Helm</h2>
<div class="outline-text-2" id="text-org799b785">
<p>
I only used Helm for a very short period of time so I'm unable to
provide compare the two fairly. I never ran into issues with Helm
when I did run it. The one thing I can say was there was always a
nagging feeling that I wasn't using Helm to its full potential. It
felt like I had my hands on a finely crafted ninja sword that could
slay even the mightiest of foes with a single, effortless slash and
I was using it to chop vegetables.
</p>

<p>
Ivy has always felt simple and does exactly what I need it to. Its
stayed out of my way for the most part and made some tasks, like
switching between buffers and finding files, easy.
</p>
</div>
</div>

<div id="outline-container-org413fffd" class="outline-2">
<h2 id="org75d9679"><a id="org413fffd"></a>9 Resources</h2>
<div class="outline-text-2" id="text-org75d9679">
<dl class="org-dl">
<dt>Github</dt><dd><a href="https://github.com/abo-abo/swiper">https://github.com/abo-abo/swiper</a></dd>
<dt>Documentation</dt><dd><a href="http://oremacs.com/swiper/">http://oremacs.com/swiper/</a></dd>
<dt>From Helm, to Ivy</dt><dd><a href="https://sam217pa.github.io/2016/09/13/from-helm-to-ivy/">https://sam217pa.github.io/2016/09/13/from-helm-to-ivy/</a></dd>
</dl>
</div>
</div>

<div id="outline-container-org8062af4" class="outline-2">
<h2 id="org8062af4">Footnotes:</h2>
<div class="outline-text-2" id="text-org8062af4">
</div>
<div id="outline-container-org098e07b" class="outline-3">
<h3 id="org098e07b">fn.1</h3>
<div class="outline-text-3" id="text-org098e07b">
<p>
Emacs provides the variable, <code>completing-read-function</code>, for
the user to set what completion framework to use. When invoking
<code>ivy-mode</code>, it sets this variable to <code>ivy-completing-read</code>. For
those curious, try enabling and disabling Ivy and call the
<code>completing-read</code> function to see the differences.
</p>
</div>
</div>


<div id="outline-container-org3600bdb" class="outline-3">
<h3 id="org3600bdb">fn.2</h3>
<div class="outline-text-3" id="text-org3600bdb">
<p>
Not familiar with use-package? No worries, just grab the <code>(setq  ...)</code> expression and plop it in your configuration file where
appropriate. However, if you haven't started using it, you
should. I won't go into it here, but I highly recommend checking
out <a href="https://github.com/jwiegley/use-package">https://github.com/jwiegley/use-package</a>.
</p>
</div>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-06-04</span>
            <span title="last modification date" class="post-info">2019-04-26</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
