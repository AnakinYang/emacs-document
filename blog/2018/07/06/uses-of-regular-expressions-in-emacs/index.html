<!DOCTYPE html>
<html lang="en">
<head>
  <title>Uses of regular expressions in Emacs - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/comment.css" type="text/css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="https://lujun9972.github.io/emacs-document/">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="https://lujun9972.github.io/emacs-document/years/">Years</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/authors/">Authors</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/tags/">Tags</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Uses of regular expressions in Emacs</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#searching-and-replacing">Searching and replacing</a></li>
<li><a href="#purging-lines">Purging lines</a></li>
<li><a href="#aligning-code">Aligning code</a></li>
<li><a href="#directory-editing">Directory editing</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
</div>
</div>
<p>
The syntax of regular expressions in Emacs is a little disappointing, but the ways you can use regular expressions in Emacs is impressive.
</p>

<p>
I've written <a href="https://www.johndcook.com/blog/regex-perl-python-emacs/">before</a> about the syntax of Emacs regular expressions. It's a pretty conservative subset of the features you may be used to from other environments as summarized in the diagram below.
</p>

<p>
[[<a href="https://www.johndcook.com/blog/regex-perl-python-emacs/">https://www.johndcook.com/blog/regex-perl-python-emacs/</a>][<img src="file://www.johndcook.com/perl-python-emacs.png" alt="perl-python-emacs.png" />]]
</p>

<p>
But there are many, many was to use regular expressions in Emacs. I did a quick search and found that about 15% of the pages in the massive Emacs manual contain at least one reference to regular expressions. Exhaustively listing the uses of regular expressions would not be practical or very interesting. Instead, I'll highlight a few uses that I find helpful.
</p>

<div id="outline-container-org306752b" class="outline-2">
<h2 id="searching-and-replacing">Searching and replacing</h2>
<div class="outline-text-2" id="text-searching-and-replacing">
<p>
One of the most frequently used features in Emacs is incremental search. You can search forward or backward for a string, searching as you type, with the commands <code>C-s</code> (<code>isearch-forward</code>) and <code>C-r</code> (<code>isearch-backward</code>). The regular expression counterparts of these commands are <code>C-M-s</code> (<code>isearch-forward-regexp</code>) and <code>C-M-r</code> (<code>isearch-backward-regexp</code>).
</p>

<p>
Note that the regular expression commands add the Alt (meta) key to their string counterparts. Also, note that Emacs consistently refers to regular expressions as <code>regexp</code> and never, as far as I know, as <code>regex</code>. (Emacs relies heavily on <a href="https://www.johndcook.com/blog/2011/05/26/software-architecture-and-trust/">conventions</a> like this to keep the code base manageable.)
</p>

<p>
A common task in any editor is to search and replace text. In Emacs you can replace all occurrences of a regular expression with <code>replace-regexp</code> or interactively choose which instances to replace with <code>query-replace-regexp</code>.
</p>
</div>
</div>

<div id="outline-container-org63a10d2" class="outline-2">
<h2 id="purging-lines">Purging lines</h2>
<div class="outline-text-2" id="text-purging-lines">
<p>
You can delete all lines in a file that contain a given regular expression with <code>flush-lines</code>. You can also invert this command, specifying which lines not to delete with <code>keep-lines</code>.
</p>
</div>
</div>

<div id="outline-container-orgd3b2863" class="outline-2">
<h2 id="aligning-code">Aligning code</h2>
<div class="outline-text-2" id="text-aligning-code">
<p>
One lesser-known but handy feature is <code>align-regexp</code>. This command will insert white space as needed so that all instances of a regular expression in a region align vertically. For example, if you have a sequence of assignment statements in a programming language you could have all the equal signs line up by using <code>align-regexp</code> with the regular expression consisting simply of an equal sign. Of course you could also align based on a much more complex pattern.
</p>

<p>
Although I imagine this feature is primarily used when editing source code, I imagine you could use it in other context such as aligning poetry or <a href="https://www.johndcook.com/blog/2016/06/15/ascii-art-diagrams-in-emacs-org-mode/">ASCII art diagrams</a>.
</p>
</div>
</div>

<div id="outline-container-org7a62580" class="outline-2">
<h2 id="directory-editing">Directory editing</h2>
<div class="outline-text-2" id="text-directory-editing">
<p>
The Emacs directory editor <code>dired</code> is something like the Windows File Explorer or the OSX Finder, but text-based. <code>dired</code> has many features that use regular expressions. Here are a few of the more common ones.
</p>

<p>
You can mark files based on the file names with <code>% m</code> (<code>dired-mark-files-regexp</code>) or based on the contents of the files with <code>% g</code> (<code>dired-mark-files-containing-regexp</code>). You can also mark files for deletion with <code>% d</code> (<code>dired-flag-files-regexp</code>).
</p>

<p>
Inside =dired= you can search across a specified set of files by typing <code>A</code> (<code>dired-do-find-regexp</code>), and you can interactively search and replace across a set of files by typing <code>Q</code> (<code>dired-do-find-regexp-and-replace</code>).
</p>
</div>
</div>

<div id="outline-container-orgcae80d6" class="outline-2">
<h2 id="miscellaneous">Miscellaneous</h2>
<div class="outline-text-2" id="text-miscellaneous">
<p>
The help apropos command (<code>C-h a</code>) can take a string or a regular expression.
</p>

<p>
The command to search for available fonts (<code>list-faces-display</code>) can take a string or regular expression.
</p>

<p>
Interactive highlighting commands (<code>highlight-regexp</code>, <code>unhighlight-regexp</code>, <code>highlight-lines-matching-regexp</code>) take a regular expression argument.
</p>

<p>
You can use a regular expression to specify which buffers to close with <code>kill-matching-buffers</code>.
</p>

<p>
Maybe the largest class of uses for regular expressions in Emacs is configuration. Many customizations in Emacs, such as giving Emacs hints to determine the right editing mode for a file or how to recognize comments in different languages, use regular expressions as arguments.
</p>
</div>
</div>

<div id="outline-container-org5817f16" class="outline-2">
<h2 id="resources">Resources</h2>
<div class="outline-text-2" id="text-resources">
<p>
You can find more posts on regular expressions and on Emacs by going to my <a href="https://www.johndcook.com/blog/notes/">technical notes</a> page. Note that the outline at the top has links for <a href="https://www.johndcook.com/blog/notes/#regex">regular expressions</a><br />
and for <a href="https://www.johndcook.com/blog/notes/#emacs">Emacs</a>.
</p>

<p>
For daily tips on regular expressions or Unix-native tools like Emacs, follow <a href="https://twitter.com/regextip">@RegexTip</a> and <a href="https://twitter.com/unixtooltip">@UnixToolTip</a> on Twitter.
</p>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-07-06</span>
            <span title="last modification date" class="post-info">2018-07-06</span>
            <span title="tags" class="post-info">:<a href="https://lujun9972.github.io/emacs-document/tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a></span>
        </div>
    <script src="https://lujun9972.github.io/emacs-document/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/blog/2018/07/06/uses-of-regular-expressions-in-emacs/";
         var disqus_url = "https://lujun9972.github.io/emacs-document/blog/2018/07/06/uses-of-regular-expressions-in-emacs/";
         var disqus_shortname = 'emacs-document';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="https://lujun9972.github.io/emacs-document/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="https://lujun9972.github.io/emacs-document//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
