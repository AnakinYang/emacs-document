<!DOCTYPE html>
<html lang="en">
<head>
  <title>Emacs #3: More on org-mode - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #ds-thread #ds-reset .ds-comment-body p a {color: #ff0;}
   #ds-thread #ds-reset .ds-comment-body p a:hover {color: #0ff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" href="/media/css/main.css" type="text/css"/>
  <link rel="stylesheet" href="/media/css/comment.css" type="text/css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="/">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="/years/">Years</a></li>
        <li><a href="/authors/">Authors</a></li>
        <li><a href="/tags/">Tags</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document.git">Github</a></li>
        <li><a href="/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="http://www.google.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Emacs #3: More on org-mode</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org89935e2">Todo tracking and keywords</a></li>
<li><a href="#org6011ec9">Tags</a></li>
<li><a href="#org0692c1e">Refiling</a></li>
<li><a href="#orgefeb8da">Archiving</a></li>
<li><a href="#org87c1709">Up next</a></li>
</ul>
</div>
</div>
<p>
This is third in <a href="https://changelog.complete.org/archives/tag/emacs2018">a series on Emacs and org-mode</a>.
</p>

<div id="outline-container-org89935e2" class="outline-2">
<h2 id="org89935e2">Todo tracking and keywords</h2>
<div class="outline-text-2" id="text-org89935e2">
<p>
When using org-mode to <a href="https://orgmode.org/guide/TODO-Items.html#TODO-Items">track your TODOs</a>, it can have multiple states. You can press <code>C-c C-t</code> for a quick shift between states. I have set this:
</p>

<pre class="example">
(setq org-todo-keywords '(
 (sequence "TODO(t!)" "NEXT(n!)" "STARTED(a!)" "WAIT(w@/!)" "OTHERS(o!)" "|" "DONE(d)" "CANCELLED(c)")
))
</pre>

<p>
Here, I set up 5 states that are for a task that is not yet done: TODO, NEXT, STARTED, WAIT, and OTHERS. Each has a single-character shortcut (t, n, a, etc). The states after the pipe symbol are ones that are considered “done”. I have two: DONE (for things that I have done) and CANCELED (for things that I haven't done, but for whatever reason, won't).
</p>

<p>
The exclamation mark means to log the time when an item was changed to a state. I don't add this to the done states because those are already logged anyhow. The @ sign means to prompt for a reason; so when switching to WAIT, org-mode will ask me why and add this to the note.
</p>

<p>
Here's an example of an entry that has had some state changes:
</p>

<pre class="example">
** DONE This is a test
 CLOSED: [2018-03-02 Fri 03:05]
 - State "DONE" from "WAIT" [2018-03-02 Fri 03:05]
 - State "WAIT" from "TODO" [2018-03-02 Fri 03:05] \\
 waiting for pigs to fly
 - State "TODO" from "NEXT" [2018-03-02 Fri 03:05]
 - State "NEXT" from "TODO" [2018-03-02 Fri 03:05]
</pre>

<p>
Here, the most recent items are on top.
</p>

<p>
<b>Agenda mode, schedules, and deadlines</b>
</p>

<p>
When you're in a todo item, C-c C-s or C-c C-d can set a schedule or a deadline for it, respectively. These show up in agenda mode. The difference is in intent and presentation. A schedule is something that you expect to work on at around a time, while a deadline is something that is due at a specific time. By default, the agenda view will start warning you about deadline items in advance.
</p>

<p>
And while we're at it, the <a href="https://orgmode.org/guide/Agenda-Views.html#Agenda-Views">agenda view</a> will show you the items that you have coming up, offers a nice way to search for items based on plain text or tags, and handles bulk manipulation of items even across multiple files. I covered setting the files for agenda mode in <a href="https://changelog.complete.org/archives/9865-emacs-2-introducing-org-mode">part 2</a> of this series.
</p>
</div>
</div>

<div id="outline-container-org6011ec9" class="outline-2">
<h2 id="org6011ec9">Tags</h2>
<div class="outline-text-2" id="text-org6011ec9">
<p>
Of course org-mode has <a href="https://orgmode.org/guide/Tags.html#Tags">tags</a>. You can quickly set them with C-c C-q.
</p>

<p>
You can set shortcuts for tags you might like to use often. Perhaps something like this:
</p>

<pre class="example">

(setq org-tag-persistent-alist 
'(("@phone" . ?p) 
("@computer" . ?c) 
("@websurfing" . ?w)
("@errands" . ?e)
("@outdoors" . ?o)
("MIT" . ?m)
("BIGROCK" . ?b)
("CONTACTS" . ?C)
("INBOX" . ?i)
))
</pre>

<p>
You can also add tags to this list on a per-file basis, and also set tags for something on a per-file basis. I use that for my inbox.org and email.org files to set an INBOX tag. I can then review all items tagged INBOX from the agenda view each day, and the simple act of refiling them into other files will cause them to lost the INBOX tag.
</p>
</div>
</div>

<div id="outline-container-org0692c1e" class="outline-2">
<h2 id="org0692c1e">Refiling</h2>
<div class="outline-text-2" id="text-org0692c1e">
<p>
“Refiling” is moving things around, either within a file or elsewhere. It has completion using your headlines. <code>C-c C-w</code> does this. I like these settings:
</p>

<pre class="example">

(setq org-outline-path-complete-in-steps nil) ; Refile in a single go
(setq org-refile-use-outline-path 'file)
</pre>
</div>
</div>

<div id="outline-container-orgefeb8da" class="outline-2">
<h2 id="orgefeb8da">Archiving</h2>
<div class="outline-text-2" id="text-orgefeb8da">
<p>
After awhile, you'll get your files all cluttered with things that are done. org-mode has an <a href="https://orgmode.org/guide/Archiving.html#Archiving">archive</a> feature to move things out of your main .org files and into some other files for future reference. If you have your org files in git or something, you may wish to delete these other files since you'd have things in history anyhow, but I find them handy for grepping and searching.
</p>

<p>
I periodically want to go through and archive everything in my files. Based on a <a href="https://stackoverflow.com/questions/6997387/how-to-archive-all-the-done-tasks-using-a-single-command">stackoverflow discussion</a>, I have this code:
</p>

<pre class="example">

(defun org-archive-done-tasks ()
 (interactive)
 (org-map-entries
 (lambda ()
 (org-archive-subtree)
 (setq org-map-continue-from (outline-previous-heading)))
 "/DONE" 'file)
 (org-map-entries
 (lambda ()
 (org-archive-subtree)
 (setq org-map-continue-from (outline-previous-heading)))
 "/CANCELLED" 'file)
)
</pre>

<p>
This is based on <a href="https://stackoverflow.com/a/27043756">a particular answer</a> --- see the comments there for some additional hints. Now you can run <code>M-x org-archive-done-tasks</code> and everything in the current file marked DONE or CANCELED will be pulled out into a different file.
</p>
</div>
</div>

<div id="outline-container-org87c1709" class="outline-2">
<h2 id="org87c1709">Up next</h2>
<div class="outline-text-2" id="text-org87c1709">
<p>
I'll wrap up org-mode with a discussion of automatically receiving emails into org, and syncing org between machines.
</p>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-03-06</span>
            <span title="last modification date" class="post-info">2018-03-06</span>
            <span title="tags" class="post-info">:<a href="/tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:travis &lt;at&gt; travis-job-c7de1c50-88ed-412e-ae70-62694dd7dea5">lujun9972</a></span>
        </div>
    <script src="/media/js/jquery-2.1.3.min.js"></script>
        <section>
            <h1>Comments</h1>
            <div id="comment-wrap">
                    <a class="disqus_label">使用 Disqus 评论</a>
    </ul>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
         //var disqus_developer = 1;
         var preempt_signal=false;
         var disqus_identifier = "/blog/2018/03/06/emacs-3-more-on-org-mode/";
         var disqus_url = "https://lujun9972.github.io/emacs-document/blog/2018/03/06/emacs-3-more-on-org-mode/";
         var disqus_shortname = 'emacs-document';
         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
             $('#disqus_thread').css('display','none');
         })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <script>
     /* comments */
     var ego_disqus_thread=$('#disqus_thread');
     var ego_ds_label=$('.ds-thread');
     $('.disqus_label').click(function(){
         ego_disqus_thread.show();
         ego_ds_label.hide();
     });
     $('.ds-label').click(function(){
         ego_disqus_thread.hide();
         ego_ds_label.show();
     });
    </script>
        </section>
    <script src="/media/js/main.js"></script>
        <script type="text/javascript">
         var _gaq = _gaq || [];
         _gaq.push(['_setAccount', '7bac4fd0247f69c27887e0d4e3aee41e']);
         _gaq.push(['_trackPageview']);
         (function() {
             var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
             ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
             var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
         })();
        </script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-c7de1c50-88ed-412e-ae70-62694dd7dea5">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
