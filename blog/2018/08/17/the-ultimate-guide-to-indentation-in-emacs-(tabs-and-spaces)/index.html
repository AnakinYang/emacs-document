<!DOCTYPE html>
<html lang="en">
<head>
  <title>The Ultimate Guide To Indentation in Emacs (Tabs and Spaces) - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">The Ultimate Guide To Indentation in Emacs (Tabs and Spaces)</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#tldr-the-full-configuration">TL;DR: The Full Configuration:</a></li>
<li><a href="#breaking-it-down">Breaking It Down</a>
<ul>
<li><a href="#functions-for-enablingdisabling-tabs">Functions for Enabling/Disabling tabs</a></li>
<li><a href="#using-tabs-or-spaces-in-different-files">Using Tabs or Spaces in Different Files</a></li>
<li><a href="#changing-the-tab-width">Changing the tab width</a></li>
<li><a href="#making-indentation-behave-sanely-electric-indent">Making Indentation Behave Sanely (Electric Indent)</a></li>
<li><a href="#indent-a-selection-left-or-right">Indent a selection left or right</a></li>
<li><a href="#highlighting-tabs-and-spaces-differently">Highlighting Tabs and Spaces Differently</a></li>
<li><a href="#making-backspace-properly-delete-tabs">Making Backspace Properly Delete Tabs</a></li>
<li><a href="#smarttabs-bonus">SmartTabs (Bonus)</a></li>
<li><a href="#python-tabs-support">Python Tabs Support</a></li>
<li><a href="#final-notes">Final Notes</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="figure">
<p><img src="file:///static/img/blog/tabs-in-emacs/screenshot.png" alt="screenshot.png" />
</p>
</div>

<div id="outline-container-org42d0def" class="outline-2">
<h2 id="tldr-the-full-configuration"><a id="org42d0def"></a>TL;DR: The Full Configuration:</h2>
<div class="outline-text-2" id="text-tldr-the-full-configuration">
<p>
This configuration is meant for users that prefer tabs over spaces. To learn how to customize tabs and spaces behavior differently, please refer to the Breaking It Down section.
</p>

<pre class="example">
; START TABS CONFIG
;; Create a variable for our preferred tab width
(setq custom-tab-width 2)

;; Two callable functions for enabling/disabling tabs in Emacs
(defun disable-tabs () (setq indent-tabs-mode nil))
(defun enable-tabs ()
 (local-set-key (kbd "TAB") 'tab-to-tab-stop)
 (setq indent-tabs-mode t)
 (setq tab-width custom-tab-width))

;; Hooks to Enable Tabs
(add-hook 'prog-mode-hook 'enable-tabs)
;; Hooks to Disable Tabs
(add-hook 'lisp-mode-hook 'disable-tabs)
(add-hook 'emacs-lisp-mode-hook 'disable-tabs)

;; Language-Specific Tweaks
(setq-default python-indent-offset custom-tab-width) ;; Python
(setq-default js-indent-level custom-tab-width) ;; Javascript

;; Making electric-indent behave sanely
(setq-default electric-indent-inhibit t)

;; Make the backspace properly erase the tab instead of
;; removing 1 space at a time.
(setq backward-delete-char-untabify-method 'hungry)

;; (OPTIONAL) Shift width for evil-mode users
;; For the vim-like motions of "&gt;&gt;" and "&lt;&lt;".
(setq-default evil-shift-width custom-tab-width)

;; WARNING: This will change your life
;; (OPTIONAL) Visualize tabs as a pipe character - "|"
;; This will also show trailing characters as they are useful to spot.
(setq whitespace-style '(face tabs tab-mark trailing))
(custom-set-faces
 '(whitespace-tab ((t (:foreground "#636363")))))
(setq whitespace-display-mappings
 '((tab-mark 9 [124 9] [92 9]))) ; 124 is the ascii ID for '\|'
(global-whitespace-mode) ; Enable whitespace mode everywhere
; END TABS CONFIG
</pre>
</div>
</div>

<div id="outline-container-org65bfdc6" class="outline-2">
<h2 id="breaking-it-down"><a id="org65bfdc6"></a>Breaking It Down</h2>
<div class="outline-text-2" id="text-breaking-it-down">
</div>

<div id="outline-container-orgf0f1143" class="outline-3">
<h3 id="functions-for-enablingdisabling-tabs"><a id="orgf0f1143"></a>Functions for Enabling/Disabling tabs</h3>
<div class="outline-text-3" id="text-functions-for-enablingdisabling-tabs">
<pre class="example">
;; Our Custom Variable
(setq custom-tab-width 2)

(defun disable-tabs () (setq indent-tabs-mode nil))
(defun enable-tabs ()
 (local-set-key (kbd "TAB") 'tab-to-tab-stop)
 (setq indent-tabs-mode t)
 (setq tab-width custom-tab-width))
</pre>

<p>
These are two different functions that we can easily call in our custom hooks. If you'd like to also activate these functions on the fly, using <code>M-x</code>, you can use the <code>(interactive)</code> function in Emacs Lisp. <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Interactive-Examples.html">Here's the documentation</a>.
</p>

<p>
First thing we do in the <code>enable-tabs</code> function is set the TAB key to <code>tab-to-tab-stop</code>. In my opinion, it is a more sane default. When you press the tab key, it will indent one tab as expected. There is no wizardry or confusion of what will happen next when you hit the tab key.
</p>

<p>
After that, we enable <a href="https://www.gnu.org/software/emacs/manual/html_node/eintr/Indent-Tabs-Mode.html">indent-tabs-mode</a> and set our custom <a href="https://www.gnu.org/software/emacs/manual/html_node/efaq/Changing-the-length-of-a-Tab.html">tab-width</a>.
</p>
</div>
</div>

<div id="outline-container-org46b7aa0" class="outline-3">
<h3 id="using-tabs-or-spaces-in-different-files"><a id="org46b7aa0"></a>Using Tabs or Spaces in Different Files</h3>
<div class="outline-text-3" id="text-using-tabs-or-spaces-in-different-files">
<pre class="example">
(add-hook 'prog-mode-hook 'enable-tabs)

(add-hook 'lisp-mode-hook 'disable-tabs)
(add-hook 'emacs-lisp-mode-hook 'disable-tabs)
</pre>

<p>
After we create <a href="#functions-for-enablingdisabling-tabs">those hooks</a>, it is very easy to decide what types of files/modes we want to enable tabs/spaces in.
</p>

<p>
In this example, we enable tabs in <a href="https://www.emacswiki.org/emacs/ProgMode">prog-mode</a>. Prog-mode is a nice hook to use if you want to make settings for pretty much all code filetypes.
</p>

<p>
After that we disable tabs (use spaces) in Lisp and ELisp files. Lisp is a special type of programming language that really doesn't work well with tabs, so I HIGHLY recommend spaces. Why is that exactly? The concept of indentation really doesn't exist in Lisp. It's all about alignment, and tabs will screw up the precise alignment that Lisp requires.
</p>
</div>
</div>

<div id="outline-container-org79a73bd" class="outline-3">
<h3 id="changing-the-tab-width"><a id="org79a73bd"></a>Changing the tab width</h3>
<div class="outline-text-3" id="text-changing-the-tab-width">
<pre class="example">
;; Our Custom Variable
(setq custom-tab-width 2)

(setq-default python-indent-offset custom-tab-width)
(setq-default evil-shift-width custom-tab-width)
</pre>

<p>
Remember not to define the variable <code>custom-tab-width</code> twice! It should be defined above your enable/disable tabs functions. I included it in this code snippet just for illustration purposes.
</p>

<p>
In this example, we set the the tab width to our custom tab width variable. The first line uses the basic <code>tab-width</code> property. I recommend not setting the tab-width in the way I have described above and instead put it inside of a function, to be used in hooks. <a href="#functions-for-enablingdisabling-tabs">Detail on doing just that</a>.
</p>

<p>
Next, we set the Python indent size to our custom tab width variable. They make it 4 spaces by default to comply with <a href="https://www.python.org/dev/peps/pep-0008/">pep8</a>, but if you prefer to have your own default value, you can change it via that variable.
</p>

<p>
Lastly, we set the evil-shift-width to our custom tab width variable. This is only useful if you are using the Evil package to get Vim-like keybindings instead of using glorious Emacs keybindings. <code>evil-shift-width</code> controls the tab size when you're using the <code>&gt;&gt;</code> or <code>&lt;&lt;</code> motion to indent or de-indent text.
</p>
</div>
</div>

<div id="outline-container-orgbde6859" class="outline-3">
<h3 id="making-indentation-behave-sanely-electric-indent"><a id="orgbde6859"></a>Making Indentation Behave Sanely (Electric Indent)</h3>
<div class="outline-text-3" id="text-making-indentation-behave-sanely-electric-indent">
<p>
Something that was driving me nuts was Emacs electric-indent indenting the previous line when I press enter. Luckily, I came across a fix one day.
</p>

<pre class="example">
(setq-default electric-indent-inhibit t)
</pre>
</div>
</div>

<div id="outline-container-orgd7f3df1" class="outline-3">
<h3 id="indent-a-selection-left-or-right"><a id="orgd7f3df1"></a>Indent a selection left or right</h3>
<div class="outline-text-3" id="text-indent-a-selection-left-or-right">
<p>
To accomplish this, refer to my <a href="file:///emacs/indent-selection">How to Indent a Selection in Emacs</a> guide.
</p>
</div>
</div>

<div id="outline-container-orge0c1e40" class="outline-3">
<h3 id="highlighting-tabs-and-spaces-differently"><a id="orge0c1e40"></a>Highlighting Tabs and Spaces Differently</h3>
<div class="outline-text-3" id="text-highlighting-tabs-and-spaces-differently">
<p>
Something that I feel that is very important to have in an editor is a way to identify spaces and tabs easily. They are both whitespace characters that can easily be confused for eachother.
</p>

<p>
We will accomplish this by making tabs appear visible as a “|” (pipe) character. If you want to highlight spaces too, please refer to <a href="http://ergoemacs.org/emacs/whitespace-mode.html">ErgoEmacs' article on making whitespace visible</a>.
</p>

<pre class="example">
(global-whitespace-mode)
(setq whitespace-style '(face tabs tab-mark trailing))
(custom-set-faces
 '(whitespace-tab ((t (:foreground "#636363")))))

(setq whitespace-display-mappings
 '((tab-mark 9 [124 9] [92 9])))
</pre>

<p>
I have separated the <code>whitespace-display-mappings</code> portion of the snippet with a newline because it is the more confusing-to-read part of it.
</p>

<p>
The first four lines of the snippet are pretty easy to understand.
</p>

<ol class="org-ol">
<li>First you enable <code>global-whitespace-mode</code>. This makes our configured whitespace visible in all buffers automatically.</li>
<li>Next, you're setting the whitespace style to show tabs and trailing whitespace. You need <code>face</code> and <code>tabs</code> included there. I am not completely sure why, but they are needed in order to set the color of the pipe character.</li>
<li>After that, you're calling <code>custom-set-faces</code> to customize the appearance of the tab whitespace. I set the text color of our pipe character to be <b>#636363</b> which is a nice color if you're using a dark-themed Emacs theme. If you're using a light theme in Emacs, you'll want a lighter color such as <b>#c1c1c1</b>.</li>
</ol>

<p>
This is an example of #636363 on a dark background. It is supposed to be subtle.
</p>

<p>
This is an example of #c1c1c1 on a light background. It is supposed to be subtle.
</p>

<p>
The line that is a little bit confusing to read is the one where we actually set the pipe character.
</p>

<p>
All you really need to know about it is that <code>124</code> is the ascii ID of the pipe character (“|”). You can view <a href="http://rmhh.co.uk/ascii.html">a list of ascii character IDs here</a>.
</p>
</div>
</div>

<div id="outline-container-org2936769" class="outline-3">
<h3 id="making-backspace-properly-delete-tabs"><a id="org2936769"></a>Making Backspace Properly Delete Tabs</h3>
<div class="outline-text-3" id="text-making-backspace-properly-delete-tabs">
<p>
Emacs has a strange default behavior when backspacing tabs. Instead of backspacing the whole tab, it backspaces the tab one space at a time.
</p>

<p>
You can fix that in the following way.
</p>

<pre class="example">
(setq backward-delete-char-untabify-method 'hungry)
</pre>
</div>
</div>

<div id="outline-container-org2a148c5" class="outline-3">
<h3 id="smarttabs-bonus"><a id="org2a148c5"></a>SmartTabs (Bonus)</h3>
<div class="outline-text-3" id="text-smarttabs-bonus">
<p>
The <a href="https://www.emacswiki.org/emacs/SmartTabs">Smart-tabs-mode</a> package helps Emacs indent with tabs and align with spaces in various languages.
</p>

<p>
I personally don't use it, but it might tickle your fancy.
</p>

<p>
If you are unsure of how to install packages in Emacs, you could refer to <a href="https://www.emacswiki.org/emacs/InstallingPackages">this wiki entry</a> or <a href="https://www.youtube.com/watch?v=Cf6tRBPbWKs">this video</a>.
</p>

<p>
After installing it, you can enable it in various languages as follows:
</p>

<pre class="example">
(smart-tabs-insinuate 'c 'javascript 'python)
</pre>
</div>
</div>

<div id="outline-container-org9bc216d" class="outline-3">
<h3 id="python-tabs-support"><a id="org9bc216d"></a>Python Tabs Support</h3>
<div class="outline-text-3" id="text-python-tabs-support">
<p>
UPDATE: There used to be a pretty tedious process to get tabs properly working in Python. Luckily, after updating this article with my new tabs config, it works fine. Update your code with <a href="#tldr-the-full-configuration">my new code</a> and you'll be all set.
</p>

<p>
You may also want to check out <a href="#smarttabs-bonus">SmartTabs</a> too.
</p>
</div>
</div>

<div id="outline-container-org79573c3" class="outline-3">
<h3 id="final-notes"><a id="org79573c3"></a>Final Notes</h3>
<div class="outline-text-3" id="text-final-notes">
<p>
That's it! Let me know if you have questions about any of this or have a suggestion to make it better.
</p>
</div>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-08-17</span>
            <span title="last modification date" class="post-info">2018-08-17</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
