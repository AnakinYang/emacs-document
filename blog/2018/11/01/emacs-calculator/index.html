<!DOCTYPE html>
<html lang="en">
<head>
  <title>Emacs Calculator - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="calc" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document.git">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Emacs Calculator</h1>
<p>
你知道<a href="http://www.gnu.org/software/emacs/calc.html">Emacs附带了一个计算器</a>吗?Woop-dee-doo !电话按!哇，一个完整的计算器!
</p>

<p>
实际上，它不仅是一个简单的计算器,而是一个<a href="http://en.wikipedia.org/wiki/Computer_algebra_system">代数计算系统</a>!把它名为计算器是不公平的。这太保守了，我肯定这导致了许多人忽视它。我最终是在彻底(重新)阅读Emacs手册时才遇到了它，我自己也几乎跳过了它。
</p>

<p>
几年前Will Wright在游戏 <i>孢子</i> 中的演示可曾见过?玩家开始是一个单细胞生物，然后进化成一个星际文明。当他开始演示时，他通过一个看起来像显微镜的东西展示了一个细胞。当时还没有人知道这个游戏是做什么的，所以每次他把范围扩大，从细菌到动物，从动物到文明，从文明到太空旅行，从行星间旅行到星系间旅行，都会引起观众的巨大反响。就像电视广告里说的:“但这还不是全部!!”
</p>

<p>
在我阅读Emacs calc手册的过程中，我不断地被它的能力所震惊，能力范围也在不断地扩大。每个新页面几乎都在说，“但这还不是全部!!”
</p>

<p>
我会像广告片一样快速过一遍它的一些功能。要查看全面的介绍请参阅calc手册。手册中有一些练习，展示了一些坑和有趣的功能交互。
</p>

<p>
按下 <code>C-x * c</code> 或 <code>M-x calc</code> 启动Calculator。会显示两个新窗口(Emacs窗口)，一个是计算器，另一个时历史记录(“跟踪”)。
</p>

<p>
首先，计算器是基于堆栈上运行的，所以它的基本用法遵循RPN。 堆栈垂直向下构建。输入数字并按回车键将其推入堆栈。操作符可以直接在数字后面输入，所以不需要一直回车。 由于负数(<code>-</code>)被用于减法，所以用下划线=_=表示负数。
一个包含3、4和10的堆栈示例如下所示，
</p>

<pre class="example">
3: 3
2: 4
1: 10
.
</pre>

<p>
10位于堆栈的“顶部”(由“1:”表示)，因此如果我们键入一个 <code>*</code>, 则前两个元素相乘。像这样,
</p>

<pre class="example">
2: 3
1: 40
.
</pre>

<p>
The calculator has no limitations on the size of integers, so you work with large numbers without losing precision. For example, we'll take <code>2^200</code>.
calculator对整数的大小没有限制，因此您可以处理大数字而不会丢失精度。例如，我们取=2^200=。
</p>

<pre class="example">
2: 2
1: 200
.
</pre>

<p>
应用 <code>^</code> 运算符，
</p>

<pre class="example">
1: 1606938044258990275541962092341162602522202993782792835301376
.
</pre>

<p>
但这还不是全部!!它支持复数，用括号(实、虚)输入。复数可以像其他数字一样被操作。取 <code>-1 + 2i</code> - <code>4 + 2i</code>,
</p>

<pre class="example">
2: (-1, 2)
1: (4, 2)
.
</pre>

<p>
使用 <code>-</code> 做减法,
</p>

<pre class="example">
1: -5
.
</pre>

<p>
Then take the square root of that using <code>Q</code>, the square root function.
用 <code>Q</code> (平方根函数)然后取其平方根。
</p>

<pre class="example">
1: (0., 2.2360679775)
.
</pre>

<p>
我们可以用 <code>p</code> 来设置精度。默认是12个位置，这里显示的时 <code>1 / 7</code> 的结果。
</p>

<pre class="example">
1: 0.142857142857
.
</pre>

<p>
如果我们把精度调整到50，再做一次，
</p>

<pre class="example">
2: 0.142857142857
1: 0.14285714285714285714285714285714285714285714285714
.
</pre>

<p>
数字也可以用各种表示法表示，比如定点表示法、科学表示法和工程表示法。不同表示法之间切换不会丢失任何信息(存储的格式与显示的格式是分开的)。
</p>

<p>
But that's not all!!! We can represent rational numbers precisely with ratios. These are entered with a <code>:</code>. Push on <code>1/7</code>, <code>3/14</code>, and <code>17/29</code>,
但这还不是全部!!我们可以用比率精确地表示有理数。方法是使用 <code>:</code> 输入. 让我们输入 <code>1/7</code>, <code>3/14</code>, <code>17/29</code>,
</p>

<pre class="example">
3: 1:7
2: 3:13
1: 17:29
.
</pre>

<p>
把它们相乘，得到最终结果，
</p>

<pre class="example">
1: 51:2842
.
</pre>

<p>
有一个模式让你自动完成这些运算。
</p>

<p>
但这还不是全部!!我们可以改变基数。使用 <code>基数#</code> 做前缀输入一个基数不同的数字。下面是我们在base-2中输入29的方法，
</p>

<pre class="example">
2#11101
</pre>

<p>
我们可以用 <code>d r</code> 改变显示的基数。例如堆栈上有29，按基数4展示为，
</p>

<pre class="example">
1: 4#131
.
</pre>

<p>
以16为基，
</p>

<pre class="example">
1: 16#1D
.
</pre>

<p>
以36为基,
</p>

<pre class="example">
1: 36#T
.
</pre>

<p>
但这还不是全部!!我们可以使用撇号 <code>'</code> 将代数表达式输入堆栈。符号可以作为表达式的一部分以其输入。注意:RPN中无法输入这些表达式。
</p>

<pre class="example">
1: a^3 + a^2 b / c d - a / b
.
</pre>

<p>
有一个“big”模式(<code>d B</code>)，便于阅读，
</p>

<pre class="example">
          2
     3   a  b   a
1:  a  + ---- - -
         c d    b

    .
</pre>

<p>
我们可以通过给变量赋值来计算表达式。如果我们将 <code>a</code> 赋值为10(<code>10ssa</code>)然后使用 "evaluates-to" 运算符(=),
</p>

<pre class="example">
          2
     3   a  b   a             100 b   10
1:  a  + ---- - -  =&gt;  1000 + ----- - --
         c d    b              c d    b

    .
</pre>

<p>
但这还不是全部!!它还支持向量类型可以用于处理向量,矩阵以及线性代数。它们用括号输入, <code>[]</code>.
</p>

<pre class="example">
2:  [4, 1, 5]
1:  [ [ 1, 2, 3 ]
      [ 4, 5, 6 ]
      [ 6, 7, 8 ] ]
    .
</pre>

<p>
然后取点积(*)，再取这个向量和矩阵的外积，
</p>

<pre class="example">
2:  [38, 48, 58]
1:  [ [ -14, -18, -22 ]
      [ -19, -18, -17 ]
      [ 15,  18,  21  ] ]
    .
</pre>

<p>
它支持你能想到的任何矩阵和向量运算，包括map和reduce(而且可以应用与自己定义的表达式)。
</p>

<p>
我们可以用它来解线性方程组。用 <code>a</code> 和 <code>b</code> 的形式求出 <code>x</code> 和 <code>y</code> 的值，
</p>

<pre class="example">
x + a y = 6
x + b y = 10
</pre>

<p>
输入(注意我们使用符号 <code>'</code> 的方式输入的)，
</p>

<pre class="example">
2:  [6, 10]
1:  [ [ 1, a ]
      [ 1, b ] ]
.
</pre>

<p>
然后做除法(/),
</p>

<pre class="example">
          4 a     4
1:  [6 + -----, -----]
         a - b  b - a

    .
</pre>

<p>
But that's not all!!! We can create graphs if gnuplot is installed. We can give it two vectors, or an algebraic expression. This plot of <code>sin(x)</code> and <code>x cos(x)</code> was made with just a few keystrokes,
但这还不是全部!!如果安装了gnuplot，我们可以用它做图。我们可以给它两个向量，或者一个代数表达式。这张 <code>sin(x)</code> 和 <code>x cos(x)</code> 的图只需要敲几下键就生成了，
</p>


<div class="figure">
<p><img src="https://nullprogram.com/img/emacs/calc-plot.png" alt="calc-plot.png" />
</p>
</div>

<p>
但这还不是全部!!它还提供一个HMS类型用于处理时间和角度。2小时，30分钟，4秒，等等，
</p>

<pre class="example">
3: 2@ 30' 4"
2: 4@ 22' 13"
1: 1@ 2' 56"
.
</pre>

<p>
当然，一般操作符可以支持。我们可以把它们都加起来，
</p>

<pre class="example">
1: 7@ 55' 13"
.
</pre>

<p>
我们可以在时间和弧度，角度等之间进行转换。
</p>

<p>
但这还不是全部!!计算器还有一个日期类型，输入在尖括号内, <code>&lt;&gt;</code> (在代数输入模式下)。它在输入日期时非常灵活。我们可以用 <code>t N</code> 插入当前日期。
</p>

<pre class="example">
1: &lt;6:59:34pm Tue Jun 23, 2009&gt;
.
</pre>

<p>
如果我们让它与数字相加，数字就被当作天数。添加4,
</p>

<pre class="example">
1: &lt;6:59:34pm Sat Jun 27, 2009&gt;
.
</pre>

<p>
它也支持刚才说的HMS格式。减去 <code>2@ 3' 15"</code>.
</p>


<pre class="example">
1: &lt;4:56:32pm Sat Jun 27, 2009&gt;
.
</pre>

<p>
但这还不是全部!!它还提供了一个模数形式来执行模数运算。例如，17 mod 24，
</p>

<pre class="example">
1: 17 mod 24
.
</pre>

<p>
加 10，
</p>

<pre class="example">
1: 3 mod 24
.
</pre>

<p>
这对 <code>n^p mod M</code> 这样的形式特别有用，calc可以有效地处理这种形式的运算。
例如 <code>3^100000 mod 24</code>. 简单的方法是先求出 <code>3^100000</code>,然后取模。这涉及到一个计算昂贵的中间步骤,即计算 <code>3^100000</code>, 这是一个巨大的数字。模块化形式则更聪明。
</p>

<p>
但这还不是全部!!计算器可以进行单位转换。我现在的Emacs版本(22.3.1)可以识别159个不同的单元。例如，我把65英里每小时推到堆栈上，
</p>

<pre class="example">
1: 65 mph
.
</pre>

<p>
Convert to meters per second with <code>u c</code>,
输入 <code>u c</code> 换算成米每秒，
</p>

<pre class="example">
1: 29.0576 m / s
.
</pre>

<p>
它可以灵活混合各种类型的单位。例如，我输入3立方米(' 3 m^3)，
</p>

<pre class="example">
       3
1:  3 m

    .
</pre>

<p>
可以换算成加仑，
</p>

<pre class="example">
1: 792.516157074 gal
   .
</pre>

<p>
我在一个没有互联网的实验室工作，所以当我需要做各种转换时，Emacs是必不可少的。
</p>

<p>
光速也是一个单位。我可以输入 <code>1 c</code> 然后转换成米每秒，
</p>

<pre class="example">
1: 299792458 m / s
.
</pre>

<p>
但这还不是全部!!就像我说的，它是一个计算机代数系统，所以它能理解符号数学。还记得之前的代数表达式吗? 我对他们进行操作。让我们把一些表达式放到堆栈上，
</p>

<pre class="example">
3:  ln(x)

       2   a x
2:  a x  + --- + c
            b

1:  y + c

    .
</pre>

<p>
前两项相乘，然后加上第三项，
</p>

<pre class="example">
                2   a x
1:  ln(x) + (a x  + --- + c) (y + c)
                     b

    .
</pre>

<p>
用 <code>a x</code> 展开，然后用 <code>a s</code> 简化，
</p>

<pre class="example">

                 2   a x y              2   a c x    2
1:  ln(x) + a y x  + ----- + c y + a c x  + ----- + c
                       b                      b

    .

</pre>

<p>
现在，让我们来看最酷的功能之一:微积分。使用 <code>a d</code> 对x求导，
</p>

<pre class="example">
    1             a y             a c
1:  - + 2 a y x + --- + 2 a c x + ---
    x              b               b

    .
</pre>

<p>
或者撤销(<code>U</code>)后求积(<code>a i</code>)，
</p>

<pre class="example">
                       3      2                  3        2
                  a y x    a x  y           a c x    a c x       2
1:  x ln(x) - x + ------ + ------ + c x y + ------ + ------ + x c
                    3       2 b               3       2 b

    .
</pre>

<p>
这是太棒了!一个文本编辑器能做微积分!
</p>

<p>
这就是Calc的主要特点。所有这些都让人感到繁杂，而这还只是皮毛。
</p>

<p>
自然，它还可以通过一些elisp扩展,甚至专门为此提供了一个 <code>defmath</code> 宏。
</p>

<p>
我打赌(希望?)有一天它会有做拉普拉斯和傅里叶变换的函数。
</p>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2018-11-01</span>
            <span title="last modification date" class="post-info">2020-02-02</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/calc">calc</a>:</span>
            <span title="author" class="post-info"><a href="mailto:travis &lt;at&gt; travis-job-c7043a44-b73b-4530-9134-0a6e463e5ad8">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
        <script>
         var _hmt = _hmt || [];
         (function() {
             var hm = document.createElement("script");
             hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
             var s = document.getElementsByTagName("script")[0]; 
             s.parentNode.insertBefore(hm, s);
         })();
        </script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-c7043a44-b73b-4530-9134-0a6e463e5ad8">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
