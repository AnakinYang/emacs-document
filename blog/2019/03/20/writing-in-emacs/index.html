<!DOCTYPE html>
<html lang="en">
<head>
  <title>Writing in Emacs - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <!-- <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="https://lujun9972.github.io/emacs-document/">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="https://lujun9972.github.io/emacs-document/years/">Years</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/authors/">Authors</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/tags/">Tags</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Writing in Emacs</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org5944504">Background</a></li>
<li><a href="#org248a0a5">org-panes</a></li>
<li><a href="#org0c2a98c">Olivetti</a></li>
<li><a href="#orgb364e84">Word count goal mode</a></li>
<li><a href="#orga171d6b">keybindings</a></li>
<li><a href="#org8525ab2">file mode lines</a></li>
<li><a href="#org571f252">Lessons learned and next steps</a></li>
</ul>
</div>
</div>
<p>
The excellent YouTube video called "<a href="https://www.youtube.com/watch?v=FtieBc3KptU">Emacs for Writers</a>" tells the story of how a writer learned about Emacs because he wanted a simple writing tool that helped him focus on what he was writing.
</p>

<p>
I have (barely) used Scrivener and other tools (including just a set of LaTeX files) to write larger texts. However, I wanted to set something up more along the lines of what the Jay Dixit in the above video has set up.
</p>

<p>
Here's what I've got so far.
</p>

<div id="outline-container-org189291e" class="outline-2">
<h2 id="org5944504">Background</h2>
<div class="outline-text-2" id="text-org5944504">
<p>
All of this is designed for writing in .org files using org-mode. Org-mode is great for writing because you can show/hide your text vs. the headers/outline of your text. There are lots of other things that org-mode <i>could</i> do, such as tracking to-do's, but at its most basic you're writing text inside headings.
</p>

<p>
Some quick things that you get "for free" with org-mode include:
</p>

<ul class="org-ul">
<li>export options built in for HTML, PDF, text, or other formats</li>
<li>comments that aren't rendered in your final version, e.g. you can have notes to yourself that people don't see when you export your writing</li>
<li>contents are all text so it's easy to make large-scale changes with tools as simple as find and replace</li>
</ul>
</div>
</div>

<div id="outline-container-orgeae13d9" class="outline-2">
<h2 id="org248a0a5">org-panes</h2>
<div class="outline-text-2" id="text-org248a0a5">
<pre class="example">
(use-package org-panes
 :ensure nil
 :config (setq org-panes-split-overview-horizontally t)
 (setq org-panes-main-size 70))
</pre>

<p>
<a href="https://github.com/knupfer/org-panes">org-panes</a> is a module to give you a three-pane view:
</p>

<ol class="org-ol">
<li>The top-level headings of your document</li>
<li>All headings of your document</li>
<li>The actual text of your document (the main pane)</li>
</ol>

<p>
If you select a different heading in the summary panes, you're taken to the relevant section in the main pane.
</p>
</div>
</div>

<div id="outline-container-orgeb975ac" class="outline-2">
<h2 id="org0c2a98c">Olivetti</h2>
<div class="outline-text-2" id="text-org0c2a98c">
<p>
<a href="https://github.com/rnkn/olivetti">Olivetti</a> will narrow the window so that you have larger margins rather than writing right up to the edges of the window. I like how this helps me focus on what I'm writing.
</p>
</div>
</div>

<div id="outline-container-org98931c3" class="outline-2">
<h2 id="orgb364e84">Word count goal mode</h2>
<div class="outline-text-2" id="text-orgb364e84">
<pre class="example">
(use-package wc-goal-mode)
</pre>

<p>
This minor mode shows you how many words are in the buffer vs. when you first opened the buffer, in the form <code>3500+120=3750</code>.
</p>

<p>
I am therefore looking at the mode line more. So, I also learned about <code>diminish</code>, which is a tool to hide things from your mode line. This tool is supported by use-package. For example, I know I'm using Helm so I don't need to see it in my mode line anymore:
</p>

<pre class="example">
(use-package helm
 :diminish
 ; ...
)
</pre>
</div>
</div>

<div id="outline-container-orgdfe6bf4" class="outline-2">
<h2 id="orga171d6b">keybindings</h2>
<div class="outline-text-2" id="text-orga171d6b">
<pre class="example">
; "C-c f" turns olivetti on/off, globally.
(use-package olivetti-mode
 :ensure nil
 :bind ("C-c f" . olivetti-mode))

; org-panes and olivetti don't play well together
; because they both change window sizes. this function
; turns olivetti-mode off first if it's on, so that
; org-panes doesn't get confused about the window size
(defun org-panes-check-olivetti ()
 (interactive)
 (if (bound-and-true-p olivetti-mode)
 (progn (olivetti-mode -1)
 (org-panes)
 (olivetti-mode))
 (org-panes)))

(use-package org
 ; bunch of other stuff goes here
 :bind (; other bindings go here
 :map org-mode-map
 ("C-c p" . org-panes-check-olivetti)
 ; etc
</pre>

<p>
I wanted two key bindings:
</p>

<ol class="org-ol">
<li><code>C-c f</code>, set globally, for "focus." This turns Olivetti on and off.</li>
<li><code>C-c p</code>, set within org-mode buffers, for "panes." This turns org-panes on and off.</li>
</ol>
</div>
</div>

<div id="outline-container-org4f33739" class="outline-2">
<h2 id="org8525ab2">file mode lines</h2>
<div class="outline-text-2" id="text-org8525ab2">
<pre class="example">
# -*- mode: org; eval: (wc-goal-mode); -*-
</pre>

<p>
I am still experimenting with file-specific mode lines. For the one larger file I am writing in, I turn on wc-goal-mode by default using the above "eval" line.
</p>
</div>
</div>

<div id="outline-container-orgcfc7167" class="outline-2">
<h2 id="org571f252">Lessons learned and next steps</h2>
<div class="outline-text-2" id="text-org571f252">
<p>
I am weighing whether it's a good idea to create a specific frame layout for writing--one that not only has org-panes but specifies specific fonts/sizes for each window.
</p>

<p>
I'm also potentially interested in capturing word count by day, maybe with an external script. Right now I'm doing this manually via a Makefile (of course):
</p>

<pre class="example">
word-count:
    (/bin/echo -n $$(date); pandoc file.org -w plain | wc -w ) &gt;&gt; file-word-count.txt
</pre>

<p>
This adds a line to the file <code>file-word-count.txt</code> whenever you run it, showing the date, time, and current word count according to <a href="https://pandoc.org/">pandoc</a>'s conversion of the file into plaintext.
</p>

<pre class="example">
Sun Feb 24 13:05:25 PST 2019 2152
Sun Feb 24 17:02:08 PST 2019 3245
</pre>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2019-03-20</span>
            <span title="last modification date" class="post-info">2019-03-20</span>
            <span title="tags" class="post-info">:<a href="https://lujun9972.github.io/emacs-document/tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a></span>
        </div>
    <script src="https://lujun9972.github.io/emacs-document/media/js/jquery-2.1.3.min.js"></script>
    <script src="https://lujun9972.github.io/emacs-document/media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="https://lujun9972.github.io/emacs-document/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="https://lujun9972.github.io/emacs-document//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
