<!DOCTYPE html>
<html lang="en">
<head>
  <title>使用Org-mode管理网络书签 - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <!-- <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="https://lujun9972.github.io/emacs-document/media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="https://lujun9972.github.io/emacs-document/">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="https://lujun9972.github.io/emacs-document/years/">Years</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/authors/">Authors</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/tags/">Tags</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="https://lujun9972.github.io/emacs-document/rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">使用Org-mode管理网络书签</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb54dcec">1. 安息吧,del.icio.us</a></li>
<li><a href="#org9c0ff65">2. 我的需求</a></li>
<li><a href="#orgc19f538">3. 实现方案</a>
<ul>
<li><a href="#org56b2f8b">3.1. 台式电脑上捕获</a></li>
<li><a href="#orge142769">3.2. 在Android手机上捕获</a></li>
<li><a href="#orgda2dd29">3.3. 未来的计划: (再次)社交化</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb54dcec" class="outline-2">
<h2 id="orgb54dcec"><span class="section-number-2">1</span> 安息吧,del.icio.us</h2>
<div class="outline-text-2" id="text-1">
<p>
(若你对我之前所使用的方案不感兴趣的话，可以跳过此章)
</p>

<p>
我使用<a href="https://delicious.com/vk/">delicious</a> 来存储，管理，访问网络书签已经有几年的历史了. delicious的Firefox插件实在太好用了, 用它来存储，贴标签，加注释,管理书签实在很方便.
</p>

<p>
不幸的是, <a href="https://en.wikipedia.org/wiki/Delicious_%28website%29">delicious</a>先是被卖给了yahoo ,随后又被卖给了AVOS. 他们决定对n原本完美的社交化书签网络服务(social bookmark web service )作出一些改变. 我喜爱的firefox插件也在某一天停止工作了. 我一点也不喜欢信的delicious,它完全毁了我使用多年的完美工作流程.
</p>

<p>
因此, 我开始寻找管理书签的替代方法. 同时,我也开始尝试使用Org-mode来完成尽可能多的工作. 这也是为什么<a href="https://lists.gnu.org/archive/html/emacs-orgmode/2012-06/msg00640.html">我想使用Org-mode来管理书签的原因</a>, 虽然这样以来就丢失像为书签和标签导出RSS-feeds这一类的社交化书签方面的功能(social bookmark features). 再说,云服务已经毁了我的数字化生活一次了. 我想这次还是独立一些比较好.
</p>
</div>
</div>

<div id="outline-container-org9c0ff65" class="outline-2">
<h2 id="org9c0ff65"><span class="section-number-2">2</span> 我的需求</h2>
<div class="outline-text-2" id="text-2">
<p>
在我说明实现的具体细节之前,我先描述一下我想象中理想的工作流程吧.
</p>

<p>
我上面提到过的, 我希望使用Org-mode来解决我的需求,为此我可以付出缺失任何社交化功能(例如feeds)的代价.
</p>

<p>
我需要在Android手机,桌面浏览器以及GNU/Emacs上都能保存书签.
</p>

<p>
并且,我还需要能够为这些书签打标签以及添加注释.
</p>

<p>
借助Org-mode,我完全可以导航,搜索,过滤,打开以及修正这些已存储的书签.
</p>
</div>
</div>

<div id="outline-container-orgc19f538" class="outline-2">
<h2 id="orgc19f538"><span class="section-number-2">3</span> 实现方案</h2>
<div class="outline-text-2" id="text-3">
<p>
我有一个名为 <code>notes.org</code> 的文件,用于收集各种片段,知识,想法,指南之类的东西. 在文件最后,我创建了一个新的主标题,名为"Bookmarks". 在该主标题下存放的是我收集的网络书签,其格式与普通的Org-mode事项一样: 
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* </span><span style="color: #2aa1ae; text-decoration: underline;"><a href="http://usesthis.com/interviews/">What do people use to get stuff done?</a></span><span style="color: #2d9574; font-size: 120%; font-weight: bold;"> </span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">:pim:diy:hardware:software:</span>
<span style="color: #bc6ec5;"> :PROPERTIES:</span>
 <span style="color: #bc6ec5;">:CREATED:</span> <span style="color: #7590db; text-decoration: underline;">[2014-08-09 Sat 10:41]</span>
<span style="color: #bc6ec5;"> :END:</span>
</pre>
</div>

<p>
该书签带给了我关于硬件,软件,工作环境,有远见的想法等主题的源源不断的灵感!
</p>

<p>
该URL是我从heise论坛中偶尔发现的.
</p>

<p>
参见 <a href="http://karl-voit.at/2014/08/10/what-do-people-use">我的博客</a>.
</p>
</div>

<div id="outline-container-org56b2f8b" class="outline-3">
<h3 id="org56b2f8b"><span class="section-number-3">3.1</span> 台式电脑上捕获</h3>
<div class="outline-text-3" id="text-3-1">
<p>
在我的台式电脑上捕获书签很简单. 我是用的每台电脑上运行有GNU/Emacs及Org-mode. 我使用以下捕获模板来创建书签:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> org-capture-templates
      '<span style="color: #bc6ec5;">(</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">many more capture templates</span>
        <span style="color: #2d9574;">(</span><span style="color: #2d9574;">"b"</span> <span style="color: #2d9574;">"Bookmark"</span> entry <span style="color: #67b11d;">(</span>file+headline <span style="color: #2d9574;">"~/share/all/org-mode/notes.org"</span> <span style="color: #2d9574;">"Bookmarks"</span><span style="color: #67b11d;">)</span>
         <span style="color: #2d9574;">"* %?\n:PROPERTIES:\n:CREATED: %U\n:END:\n\n"</span> <span style="color: #4f97d7;">:empty-lines</span> <span style="color: #a45bad;">1</span><span style="color: #2d9574;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">many more capture templates</span>
        <span style="color: #bc6ec5;">)</span>
      <span style="color: #4f97d7;">)</span>
</pre>
</div>

<p>
我曾经试验过<a href="http://orgmode.org/worg/org-contrib/org-protocol.html">org-protocol</a> 但是失败了. org-protocol允许从外部软件(例如你的网络浏览器)中直接捕获书签到Org-mode中.
</p>

<p>
虽然实验org-protocol失败了,但是我并不觉得现在方案就会很繁杂,我只要准照下面几个步骤就能添加一个书签了: 首先,在浏览器中按下 <code>C-l</code> 跳转到地址栏并选中当前页面的URL. 然后我按下 <code>C-c</code> 拷贝URL到粘贴版,切换到Emacs/Org-mode(通常位于左边的虚拟桌面中) 并按下捕获书签的快捷键: <code>C-c c b</code>. 最后,我通过手工或者通过函数 <code>my-url-linkify</code> (函数定义在下面)来插入URL及其描述即可.
</p>
</div>
</div>

<div id="outline-container-orge142769" class="outline-3">
<h3 id="orge142769"><span class="section-number-3">3.2</span> 在Android手机上捕获</h3>
<div class="outline-text-3" id="text-3-2">
<p>
大多数的书签都是我在手机上阅读Atom/RSS feeder时保存下来的. 幸运的是,我可以很容易地将URL分享給MobileOrg. MobileOrg可以与我的桌面环境的Org-mode相互同步. 按照惯例,我需要在URL前面加上"Bookmark"说明. 这样的话,我就能将其他事项与要保存的书签URL区分开了.
</p>

<p>
同步之后,MobileOrg中的书签会在inbox.org中产生类似下面的一条记录: 
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* </span><span style="color: #dca3a3;">NEXT</span><span style="color: #4f97d7; font-size: 130%; font-weight: bold;"> Bookmark </span><span style="color: #2aa1ae; text-decoration: underline;"><a href="http://Karl-Voit.at">Homepage of Karl Voit</a></span>
 <span style="color: #7590db; text-decoration: underline;">[2014-08-10 Sun 16:24]</span>   
</pre>
</div>

<p>
通过Elisp函数 <code>my-save-bookmark</code>, 我能将inbox.org中的书签快速迁移到对应的note.org中对应的标题下. 而且还能自动触发打标签的动作. 总结来说,我只需要在书签上按一个快捷键,然后输入标签就行了.
</p>

<p>
下面这个Elisp函数是我刚开始学习Elisp时写得. 因此若觉得还有改进的空间,请发我补丁: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">######################################################</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">smart moving bookmark headings from inbox to notes.org</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">see id:2014-03-09-inbox-to-bookmarks</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my-save-bookmark</span><span style="color: #bc6ec5;">()</span>
  <span style="color: #2aa1ae;">"removes </span><span style="color: #dca3a3;">NEXT</span><span style="color: #2aa1ae;">/Bookmark, (NOT YET: FIXXME: retrieves title),</span>
<span style="color: #2aa1ae;">move time-stamp to CREATED, re-file to bookmarks, invoke Org-mode tagging process"</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">save-excursion</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">get myself to the beginning of the current heading:</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;;</span><span style="color: #2aa1ae; background-color: #292e34;">(outline-previous-visible-heading 1)  ;; jump to previous heading</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;;</span><span style="color: #2aa1ae; background-color: #292e34;">(outline-next-visible-heading 1)      ;; jumps to beginning of the current (interesting) heading</span>
    <span style="color: #2d9574;">(</span>beginning-of-line<span style="color: #2d9574;">)</span>                   <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">jump to beginning of line</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span><span style="color: #b1951d;">(</span>mybegin <span style="color: #4f97d7;">(</span>point<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>              <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">mark beginning of line as start point</span>
      <span style="color: #67b11d;">(</span>outline-next-visible-heading <span style="color: #a45bad;">1</span><span style="color: #67b11d;">)</span>    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">jumps to EOF if it is the last entry</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">save-restriction</span>
        <span style="color: #b1951d;">(</span>narrow-to-region mybegin <span style="color: #4f97d7;">(</span>point<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">ignore everything outside of region</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">search/replace unwanted keywords at the beginning:</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">while</span> <span style="color: #4f97d7;">(</span>search-forward <span style="color: #2d9574;">"* </span><span style="color: #dca3a3;">NEXT</span><span style="color: #2d9574;"> Bookmark "</span> nil t<span style="color: #4f97d7;">)</span> <span style="color: #4f97d7;">(</span>replace-match <span style="color: #2d9574;">"* "</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">while</span> <span style="color: #4f97d7;">(</span>search-forward <span style="color: #2d9574;">"* </span><span style="color: #dca3a3;">NEXT</span><span style="color: #2d9574;"> "</span> nil t<span style="color: #4f97d7;">)</span> <span style="color: #4f97d7;">(</span>replace-match <span style="color: #2d9574;">"* "</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">while</span> <span style="color: #4f97d7;">(</span>search-forward <span style="color: #2d9574;">"* Bookmark "</span> nil t<span style="color: #4f97d7;">)</span> <span style="color: #4f97d7;">(</span>replace-match <span style="color: #2d9574;">"* "</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">while</span> <span style="color: #4f97d7;">(</span>search-forward <span style="color: #2d9574;">"//m.heise.de"</span> nil t<span style="color: #4f97d7;">)</span> <span style="color: #4f97d7;">(</span>replace-match <span style="color: #2d9574;">"//heise.de"</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">remove mobile heise URL</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">while</span> <span style="color: #4f97d7;">(</span>search-forward <span style="color: #2d9574;">"/from/atom10?wt_mc=rss.ho.beitrag.atom"</span> nil t<span style="color: #4f97d7;">)</span><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">remove heise RSS tags</span>
          <span style="color: #4f97d7;">(</span>replace-match <span style="color: #2d9574;">""</span> nil t<span style="color: #4f97d7;">)</span>
          <span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>goto-char <span style="color: #4f97d7;">(</span>point-min<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">insert second asterisk (modify to second level heading)</span>
        <span style="color: #b1951d;">(</span>insert <span style="color: #2d9574;">"*"</span><span style="color: #b1951d;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">move time-stamp to properties-drawer:</span>
        <span style="color: #b1951d;">(</span>search-forward-regexp <span style="color: #2d9574;">"^\\[20"</span><span style="color: #b1951d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">jump to second line (with time-stamp) via search</span>
        <span style="color: #b1951d;">(</span>beginning-of-line<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>insert <span style="color: #2d9574;">":PROPERTIES:\n:CREATED:  "</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>end-of-line<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>newline<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>insert <span style="color: #2d9574;">":END:\n"</span><span style="color: #b1951d;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">move region to end of notes.org</span>
        <span style="color: #b1951d;">(</span>kill-region mybegin <span style="color: #4f97d7;">(</span>point<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span> <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">kill region to kill-ring</span>
        <span style="color: #b1951d;">(</span>switch-to-buffer <span style="color: #2d9574;">"notes.org"</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>end-of-buffer<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>newline<span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>yank<span style="color: #b1951d;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">add tags</span>
        <span style="color: #b1951d;">(</span>outline-previous-visible-heading <span style="color: #a45bad;">1</span><span style="color: #b1951d;">)</span>  <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">jump to heading</span>
        <span style="color: #b1951d;">(</span>org-set-tags-command<span style="color: #b1951d;">)</span>
        <span style="color: #67b11d;">)</span>
      <span style="color: #2d9574;">)</span>
    <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>

<p>
若我存储URL时没有输入描述,则结果可能像下面这样: 
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* </span><span style="color: #dca3a3;">NEXT</span><span style="color: #4f97d7; font-size: 130%; font-weight: bold;"> Bookmark </span><span style="color: #2aa1ae; text-decoration: underline;"><a href="http://Karl-Voit.at">http://Karl-Voit.at</a></span>
 <span style="color: #7590db; text-decoration: underline;">[2014-08-10 Sun 16:24]</span>
</pre>
</div>

<p>
为了給链接加上对应网页上的标题, 我在网上找到一段代码并改造了它以使之符合我的需求: 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">######################################################</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">replaces URL with Org-mode link including description</span>
<span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">see id:2014-03-09-inbox-to-bookmarks</span>
<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my-www-get-page-title</span> <span style="color: #bc6ec5;">(</span>url<span style="color: #bc6ec5;">)</span>
  <span style="color: #2aa1ae;">"retrieve title of web page.</span>
<span style="color: #2aa1ae;">from: http://www.opensubscriber.com/message/help-gnu-emacs@gnu.org/14332449.html"</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #2d9574;">(</span><span style="color: #67b11d;">(</span>title<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">with-current-buffer</span> <span style="color: #67b11d;">(</span>url-retrieve-synchronously url<span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>goto-char <span style="color: #b1951d;">(</span>point-min<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>re-search-forward <span style="color: #2d9574;">""</span> nil t <span style="color: #a45bad;">1</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> title <span style="color: #b1951d;">(</span>match-string <span style="color: #a45bad;">1</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>goto-char <span style="color: #b1951d;">(</span>point-min<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>re-search-forward <span style="color: #2d9574;">"charset=</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">(</span><span style="color: #2d9574;">[-0-9a-zA-Z]*</span><span style="color: #2d9574; font-weight: bold;">\\</span><span style="color: #2d9574; font-weight: bold;">)</span><span style="color: #2d9574;">"</span> nil t <span style="color: #a45bad;">1</span><span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span>decode-coding-string title <span style="color: #b1951d;">(</span>intern <span style="color: #4f97d7;">(</span>match-string <span style="color: #a45bad;">1</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>

<span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">defun</span> <span style="color: #bc6ec5; font-weight: bold;">my-url-linkify</span> <span style="color: #bc6ec5;">()</span>
  <span style="color: #2aa1ae;">"Make URL at cursor point into an Org-mode link.</span>
<span style="color: #2aa1ae;">If there's a text selection, use the text selection as input.</span>

<span style="color: #2aa1ae;">Example: http://example.com/xyz.htm</span>
<span style="color: #2aa1ae;">becomes</span>
<span style="color: #2aa1ae;">\[</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2aa1ae;">[http://example.com/xyz.htm</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2aa1ae;">]</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2aa1ae;">[Source example.com</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2aa1ae;">]</span><span style="color: #dc752f; background-color: #292b2e;">\</span><span style="color: #2aa1ae;">]</span>

<span style="color: #2aa1ae;">Adapted code from: http://ergoemacs.org/emacs/elisp_html-linkify.html"</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">interactive</span><span style="color: #bc6ec5;">)</span>
  <span style="color: #bc6ec5;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #2d9574;">(</span>resultLinkStr bds p1 p2 domainName<span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">get the boundary of URL or text selection</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>region-active-p<span style="color: #67b11d;">)</span>
        <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> bds <span style="color: #b1951d;">(</span>cons <span style="color: #4f97d7;">(</span>region-beginning<span style="color: #4f97d7;">)</span> <span style="color: #4f97d7;">(</span>region-end<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span> <span style="color: #67b11d;">)</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> bds <span style="color: #b1951d;">(</span>bounds-of-thing-at-point 'url<span style="color: #b1951d;">)</span><span style="color: #67b11d;">)</span>
      <span style="color: #2d9574;">)</span>
    <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">set URL</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> p1 <span style="color: #67b11d;">(</span>car bds<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">setq</span> p2 <span style="color: #67b11d;">(</span>cdr bds<span style="color: #67b11d;">)</span><span style="color: #2d9574;">)</span>
    <span style="color: #2d9574;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #67b11d;">(</span>
          <span style="color: #b1951d;">(</span>url <span style="color: #4f97d7;">(</span>buffer-substring-no-properties p1 p2<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
          <span style="color: #67b11d;">)</span>
      <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">retrieve title</span>
      <span style="color: #67b11d;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #b1951d;">(</span><span style="color: #4f97d7;">(</span>title <span style="color: #bc6ec5;">(</span>my-www-get-page-title url<span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #b1951d;">(</span>message <span style="color: #4f97d7;">(</span>concat <span style="color: #2d9574;">"title is: "</span> title<span style="color: #4f97d7;">)</span><span style="color: #b1951d;">)</span>
        <span style="color: #2aa1ae; background-color: #292e34;">;;</span><span style="color: #2aa1ae; background-color: #292e34;">(setq url (replace-regexp-in-string "&amp;" "&amp;" url))</span>
        <span style="color: #b1951d;">(</span><span style="color: #4f97d7; font-weight: bold;">let</span> <span style="color: #4f97d7;">(</span><span style="color: #bc6ec5;">(</span>resultLinkStr <span style="color: #2d9574;">(</span>concat <span style="color: #2d9574;">"[["</span> url <span style="color: #2d9574;">"]["</span> title <span style="color: #2d9574;">"]]"</span><span style="color: #2d9574;">)</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>
          <span style="color: #2aa1ae; background-color: #292e34;">;; </span><span style="color: #2aa1ae; background-color: #292e34;">delete url and insert the link</span>
          <span style="color: #4f97d7;">(</span>delete-region p1 p2<span style="color: #4f97d7;">)</span>
          <span style="color: #4f97d7;">(</span>insert resultLinkStr<span style="color: #4f97d7;">)</span>
          <span style="color: #b1951d;">)</span>
        <span style="color: #67b11d;">)</span>
      <span style="color: #2d9574;">)</span>
    <span style="color: #bc6ec5;">)</span>
  <span style="color: #4f97d7;">)</span>
</pre>
</div>

<p>
很不幸,这段代码并不时常有效. 大多数时候我会得到一个报错信息 <code>save-current-buffer: Invalid coding system: UTF-8</code>,我也看不懂这个错误是什么意思. 若你知道如何修复这个问题,请给我留言. 
</p>

<p>
注意: 想看我当前版本的Elis函数,请参见: <a href="https://github.com/novoid/dot-emacs">https://github.com/novoid/dot-emacs</a>
</p>
</div>
</div>

<div id="outline-container-orgda2dd29" class="outline-3">
<h3 id="orgda2dd29"><span class="section-number-3">3.3</span> 未来的计划: (再次)社交化</h3>
<div class="outline-text-3" id="text-3-3">
<p>
目前我对该方案还蛮满意的.
</p>

<p>
未来,我想通过博客软件 <a href="https://github.com/novoid/lazyblorg">lazyblorg</a> 来将选中的书签整合进我的博客中去,而所需要的步骤应该仅仅是为书签添加"blog"标签.
</p>

<p>
(像书签)这样简短的条目应该能够自动被加上"small"或"bookmark"标签. 我会将这些条目发布成一个<a href="https://en.wikipedia.org/wiki/Atom_feed">Atom feed</a>,这样你也能看到这些书签了. 通过这种方式,我将又一次具有社交分享功能,只不过这一次该功能完全由我自己掌控. 
</p>
</div>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2016-06-20</span>
            <span title="last modification date" class="post-info">2016-06-20</span>
            <span title="tags" class="post-info">:N/A:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a></span>
        </div>
    <script src="https://lujun9972.github.io/emacs-document/media/js/jquery-2.1.3.min.js"></script>
    <script src="https://lujun9972.github.io/emacs-document/media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="https://lujun9972.github.io/emacs-document/media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T430S">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="https://lujun9972.github.io/emacs-document//instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
