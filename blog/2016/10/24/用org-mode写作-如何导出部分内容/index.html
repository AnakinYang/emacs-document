<!DOCTYPE html>
<html lang="en">
<head>
  <title>用Org-mode写作:如何导出部分内容 - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="org-mode" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;集思广益</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">用Org-mode写作:如何导出部分内容</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org47ff326">1. Selective Export in Org-Mode</a></li>
<li><a href="#org852e17e">2. Tags</a>
<ul>
<li><a href="#org91b5818">2.1. Setting a Tag</a></li>
<li><a href="#org0059a31">2.2. Hiding Tagged Content on Export</a></li>
<li><a href="#orgf4b9700">2.3. Hiding Tag Labels on Exported Content</a></li>
<li><a href="#org9274f34">2.4. Hiding Headers while Using Tags</a></li>
</ul>
</li>
<li><a href="#orgd5a2f1f">3. Drawers</a>
<ul>
<li><a href="#org89adbd2">3.1. What Drawers Are</a></li>
<li><a href="#org71785ed">3.2. When You Might Use Drawers in Writing</a></li>
<li><a href="#org4c849ca">3.3. Inserting Drawers</a></li>
<li><a href="#orgb03767d">3.4. Hiding Drawers on Export</a></li>
<li><a href="#orgb649827">3.5. Cycling through Drawers like Headers</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org47ff326" class="outline-2">
<h2 id="org47ff326"><span class="section-number-2">1</span> Selective Export in Org-Mode</h2>
<div class="outline-text-2" id="text-1">
<p>
使用org-mode写作的一个优势在于能够随意决定导出哪部分的内容.
比如我可以在org文件中保留下论文的大纲但是却并不导出到最终的pdf文件中去. 也可以在准备综合测试时将长篇笔记中的总结给导出来.
</p>

<p>
本文,我将告诉你两种防止内容被导出的方法: tags 与 drawers. 
tags与drawers两者的根本区别在于标签是作用于标题的(对章节与子章节中的全部内容生效),而drawers并不像标签那样作用域于标题.
</p>

<p>
这里尤其需要提一下的是注释. 以 <code>#</code> 开头的行,或 <code>#+BEGIN_COMMENT</code> 与 <code>#+END_COMMENT</code> 之间的内容都被认为是注释. <a href="http://orgmode.org/manual/Comment-lines.html">详情请参见Org-mode manual</a>. 
不过我这里只对那些能够导出的部分感兴趣-只有那些内容才能导出到pdf文件中,也只能对那些内容添加tag和drawer.
</p>
</div>
</div>

<div id="outline-container-org852e17e" class="outline-2">
<h2 id="org852e17e"><span class="section-number-2">2</span> Tags</h2>
<div class="outline-text-2" id="text-2">
<p>
Org-mode允许你为标题分配标签. <a href="http://orgmode.org/manual/Tags.html">Org-mode的manual</a> 详细地介绍了与标签相关的那些函数及其使用方法.
我们这里只需要知道如何如何设置tag,导出时隐藏指定标签的相关内容以及在导出时不导出标签本身,三件事情就行了.
</p>
</div>

<div id="outline-container-org91b5818" class="outline-3">
<h3 id="org91b5818"><span class="section-number-3">2.1</span> Setting a Tag</h3>
<div class="outline-text-3" id="text-2-1">
<p>
插入标签最简单的方法就是按下 <code>C-c C-q</code>. 当然<a href="http://orgmode.org/manual/Setting-tags.html#Setting-tags">manual中也有其他更复杂的插入方式</a>. 
Tags不仅应用于标题本身,还应用于标题所包含的那些内容.
举个例子,假设我正在复习考试笔记,我将某个章节打上标签 <code>:summary:</code> 后,该章节下的所有子章节都隐式地基础了该标签.
若我在导出时排除了带 <code>:summary:</code> 标签的内容的话,则该章节及其子章节都会被排除出去.
</p>
</div>
</div>

<div id="outline-container-org0059a31" class="outline-3">
<h3 id="org0059a31"><span class="section-number-3">2.2</span> Hiding Tagged Content on Export</h3>
<div class="outline-text-3" id="text-2-2">
<p>
依然假设我正在复习考试笔记, 假设我的的考试笔记有两个不同的标签,分别为 <code>:summary:</code> 与 <code>:fullnotes:</code>, 其详细内容如下所示:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* Article X by Philosopher Z </span>
<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Summary                                                          </span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">:summary:</span>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse a
diam velit. Vestibulum pharetra mi eu nisl luctus, vitae condimentum
mauris volutpat.

<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Full notes                                                     </span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">:fullnotes:</span>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse a
diam velit. Vestibulum pharetra mi eu nisl luctus, vitae condimentum
mauris volutpat. Mauris aliquet eleifend erat, nec vestibulum neque
bibendum ac. In nec risus mauris. Nulla risus tortor, sodales vitae
ligula quis, dapibus aliquam magna. Fusce pharetra, tellus gravida
posuere tempor, orci enim ullamcorper metus, nec aliquam ipsum ex in
velit. Donec ante massa, consequat sed consequat at, porttitor quis
metus. Cras sit amet dui ac neque pulvinar rutrum id id tellus.
</pre>
</div>

<p>
则,我只需要在org文件的头部加上 <code>#+EXCLUDE_TAGS: summary</code> 就能在导出时将带 <code>:summary:</code> 标签的内容排除出去,只留下 <code>:fullnotes:</code> 的内容.
</p>
</div>
</div>

<div id="outline-container-orgf4b9700" class="outline-3">
<h3 id="orgf4b9700"><span class="section-number-3">2.3</span> Hiding Tag Labels on Exported Content</h3>
<div class="outline-text-3" id="text-2-3">
<p>
你为标题加上标签后,会发现通过 <code>\(\rm\LaTeX{}\)</code> 导出的pdf文件中会有一个标题显示在标题的右边.
大多数的时候你都会想把这个标签在导出时给隐藏起来. 方法也很简单,只需要在org的头部加上 <code>#+OPTIONS: tags:nil</code> 就行了.
</p>
</div>
</div>

<div id="outline-container-org9274f34" class="outline-3">
<h3 id="org9274f34"><span class="section-number-3">2.4</span> Hiding Headers while Using Tags</h3>
<div class="outline-text-3" id="text-2-4">
<p>
假设你又这么一份文档:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* Lorem Ipsum</span>
<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Summary                                                          </span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">:summary:</span>

Vivamus libero nisi, maximus scelerisque felis ac, dapibus posuere
metus. In hac habitasse platea dictumst.  

<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Body text</span>

Vivamus libero nisi, maximus scelerisque felis ac, dapibus posuere
metus. In hac habitasse platea dictumst.  Fusce aliquam nisi in lorem
pretium, vel congue lacus consectetur. Donec in ligula ligula. Etiam
rutrum tortor a euismod convallis. Nunc mattis laoreet mi, vitae
ullamcorper arcu. Quisque semper, velit in dictum viverra, augue mi
iaculis urna, non ultricies lacus mauris id neque.
</pre>
</div>

<p>
那么你在将之导出成pdf文件时,可以通过 <code>#+EXCLUDE_TAGS: summary</code> 来将summary部分的内容排除掉. 不过随后你会发现导出内容中,在章节标题(“1. Lorem Ipsum”)后面紧接着一个子章节的标题(“1.1 Body text”).
这种样式一般都很难看:
</p>


<div class="figure">
<p><img src="http://www.clarkdonley.com/images/selective-export-1.png" alt="selective-export-1.png" />
</p>
</div>

<p>
但是呢,你也不能直接删掉 <code>** Body text</code> 这一行呀,因为这样你后面的内容会被当成summary而不被导出.
</p>

<p>
这时候就该 <code>:ignoreheading:</code> 标签大显神通了. 该标签允许你导出章节内容及其子章节,但却让章节本身隐藏起来.
在上面的例子中,你可以为 <code>**Body text</code> 子章节分配一个 <code>:ignoreheading:</code> 标签, 这样一来导出的pdf中, 本文 <code>Vivamus libero nisi…</code> 就紧跟在 <code>Lorem Ipsum</code> 标题之后了.
</p>


<div class="figure">
<p><img src="http://www.clarkdonley.com/images/selective-export-2.png" alt="selective-export-2.png" />
</p>
</div>

<p>
用后面将的drawer也能达到相同的想过.(甚至我觉得用drawer会更方便一些)
</p>
</div>
</div>
</div>

<div id="outline-container-orgd5a2f1f" class="outline-2">
<h2 id="orgd5a2f1f"><span class="section-number-2">3</span> Drawers</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org89adbd2" class="outline-3">
<h3 id="org89adbd2"><span class="section-number-3">3.1</span> What Drawers Are</h3>
<div class="outline-text-3" id="text-3-1">
<p>
<a href="http://orgmode.org/manual/Drawers.html">org-mode manual中关于drawers的内容</a> 很值得一看. 里面说,drawer一般用于存放那些你平时不想看到的相关信息. 里面还举了一个例子:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* This is a headline Still outside the drawer</span>
<span style="color: #bc6ec5;">   :DRAWERNAME: </span>
   This is inside the drawer.
<span style="color: #bc6ec5;">   :END:</span>
   After the drawer.
</pre>
</div>
</div>
</div>

<div id="outline-container-org71785ed" class="outline-3">
<h3 id="org71785ed"><span class="section-number-3">3.2</span> When You Might Use Drawers in Writing</h3>
<div class="outline-text-3" id="text-3-2">
<p>
为什么我们不一直用tags呢? 这是因为tags是作用于整个章节上的(包括该章节下面的内容以及子章节),但是有时候我们不想隐藏整个章节的内容,这时drawers就很有用了.
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* Main Section</span>
<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Outline                                                        </span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">:outline:</span>
1. Sed eget arcu nec ligula tristique pretium sit amet eget justo.
   1. Cras lacinia at odio at tincidunt.
   2. Maecenas vitae risus nec arcu pulvinar hendrerit.
      1. Class aptent taciti sociosqu ad litora torquent per conubia
         nostra, per inceptos himenaeos.
2. Quisque pellentesque placerat elementum.
   1. Nam arcu felis, tempor id ex ac, sollicitudin tristique nisl.
   2. Maecenas facilisis dui at neque vulputate rutrum.
   3. Nam eleifend nunc accumsan lorem imperdiet vulputate.
3. Donec eu orci vel eros blandit tincidunt eu pulvinar leo. 

<span style="color: #292b2e;">*</span><span style="color: #2d9574; font-size: 120%; font-weight: bold;">* Body</span>
Vivamus odio mauris, fermentum semper tempus id, scelerisque vel
metus. Aliquam risus lectus, lobortis ut risus eu, facilisis
consectetur diam. Sed euismod ullamcorper erat, at lacinia enim
lacinia eget. Nam sed justo dapibus, tempus ipsum et, sagittis
ex. Integer interdum consequat augue pellentesque fermentum. Integer
vehicula lorem sed purus vulputate, vitae cursus risus
eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</pre>
</div>

<p>
上面这段例子,用drawer来写就是这样的:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #4f97d7; font-size: 130%; font-weight: bold;">* Main Section</span>

<span style="color: #bc6ec5;">:OUTLINE: </span>
1. Sed eget arcu nec ligula tristique pretium sit amet eget justo.
   1. Cras lacinia at odio at tincidunt.
   2. Maecenas vitae risus nec arcu pulvinar hendrerit.
      1. Class aptent taciti sociosqu ad litora torquent per conubia
         nostra, per inceptos himenaeos.
2. Quisque pellentesque placerat elementum.
   1. Nam arcu felis, tempor id ex ac, sollicitudin tristique nisl.
   2. Maecenas facilisis dui at neque vulputate rutrum.
   3. Nam eleifend nunc accumsan lorem imperdiet vulputate.
3. Donec eu orci vel eros blandit tincidunt eu pulvinar leo. 
<span style="color: #bc6ec5;">:END:</span>

Vivamus odio mauris, fermentum semper tempus id, scelerisque vel
metus. Aliquam risus lectus, lobortis ut risus eu, facilisis
consectetur diam. Sed euismod ullamcorper erat, at lacinia enim
lacinia eget. Nam sed justo dapibus, tempus ipsum et, sagittis
ex. Integer interdum consequat augue pellentesque fermentum. Integer
vehicula lorem sed purus vulputate, vitae cursus risus
eleifend. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</pre>
</div>
</div>
</div>

<div id="outline-container-org4c849ca" class="outline-3">
<h3 id="org4c849ca"><span class="section-number-3">3.3</span> Inserting Drawers</h3>
<div class="outline-text-3" id="text-3-3">
<p>
插入drawers非常容易: 按下 <code>C-c C-x d</code> 就行了. <a href="http://orgmode.org/manual/Drawers.html">org-mode manual</a>中有更多详细的细节,不过就目前来说我们只需要知道这点就行了.
</p>
</div>
</div>

<div id="outline-container-orgb03767d" class="outline-3">
<h3 id="orgb03767d"><span class="section-number-3">3.4</span> Hiding Drawers on Export</h3>
<div class="outline-text-3" id="text-3-4">
<p>
要在导出时隐藏所有的drawers的内容, 你可以在org文件的头部加上 <code>#+OPTIONS: d:nil</code>.
</p>

<p>
不过如果我紧紧想排除 <code>:OUTLINE:</code> drawer的内容怎么办呢? 这时,我需要加上的是 <code>#+OPTIONS: d:(not)</code> 这一行. 这样一来除了 <code>:OUTLINE:</code> 之外的drawer内容都会导出来.
如果你想隐藏 <code>:OUTLINE:</code> 与 <code>:SUMMARY:</code> 这两个drawers的内容, 你需要加上的是 <code>#+OPTIONS: d: (not not "SUMMARY")</code> 这样一行内容.
</p>
</div>
</div>

<div id="outline-container-orgb649827" class="outline-3">
<h3 id="orgb649827"><span class="section-number-3">3.5</span> Cycling through Drawers like Headers</h3>
<div class="outline-text-3" id="text-3-5">
<p>
如果你使用drawers来存放章节总结之类的内容,那么你也许会希望能像章节头一样cycle through这些drawer.
好在 <a href="http://stackoverflow.com/questions/19510984/section-summaries-in-org-mode">StackExchange上有两个用户折腾出了一个扩展</a>, 你只要把这段代码放入 <code>.emacs</code> 文件中(若你用的是Aquamacs那么放入 <code>Preferences.el</code> 中) 就能对 <code>:SUMMARY:</code> drawer 实现类似的功能了.
你也很容易就能将这段代码修改成对其他drawer生效. 不过就我来说,如果我希望drawer能像章节头一样cycle through的话,那我就这届用标题头就好了.
</p>

<p>
tags 和 drawers的用法还有很多种,不过本文应该教会你了关于如何通过tags与drawers导出org-mode中部分内容的足够知识了.
</p>
</div>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2016-10-24</span>
            <span title="last modification date" class="post-info">2018-02-15</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/org-mode">org-mode</a>:</span>
            <span title="author" class="post-info"><a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:lujun9972 &lt;at&gt; T520">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
