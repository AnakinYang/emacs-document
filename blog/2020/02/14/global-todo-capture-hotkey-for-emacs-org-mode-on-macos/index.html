<!DOCTYPE html>
<html lang="en">
<head>
  <title>Global TODO Capture Hotkey for Emacs Org Mode on macOS - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document.git">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Global TODO Capture Hotkey for Emacs Org Mode on macOS</h1>
<p>
May 9th, 2018
</p>

<p>
<a href="https://vg01.met.vgwort.de/na/38ac0231c58b4b7889745a9ac61697d7">https://vg01.met.vgwort.de/na/38ac0231c58b4b7889745a9ac61697d7</a>
</p>

<p>
I am using GNU Emacs for a while now to do all kinds of stuff. I'm thinking about migrating away from OmniFocus as my task manager and use Org mode instead. What I like so far is the free-form list nature of Org files. I can have an outline of notes and sprinkle <code>TODO</code> items inside them. This way I can take notes on puzzling problems I'm working on and mark things I need to do later. This is super useful to remind myself what to clean up before a commit, for example write or amend tests or remove debug code somewhere. I like it. I got used to a lot of shortcuts already, so most of the pain of daily use is gone.
</p>

<p>
Today I played around with <code>org-capture</code>. It's a command that opens a temporary text entry field (i.e. a buffer) and stores the entry in a specific location for you. You need to configure <a href="https://orgmode.org/manual/Capture-templates.html">Capture templates</a> for this to work, and they can do really amazing stuff, like “insert the captured item in file foo.txt below the heading XYZ for the current date”. Ah, the power of plain text.
</p>

<p>
A very simple capture template is a simple <code>TODO</code> item that gets filed in your inbox, e.g. located at <code>~/org/inbox.org</code>:
</p>

<pre class="example">
(setq org-capture-templates
 (quote (("t" "todo" entry (file "~/org/inbox.org")
 "* TODO %?\n%a\n"))))
</pre>

<p>
When you invoke <code>org-capture</code> and select this template with the shorthand “t”, it will populate the temporary text entry for you with a new list item starting with <code>* TODO</code>. In a line below the cursor position (indicated by <code>%?</code> in the template), a link to the current place you were at is inserted (<code>%a</code>). That link can be a file, or a location in an Org document. You can click on these links to jump to that location. These <code>TODO</code> items become system-wide file annotations, so to speak.
</p>

<p>
Now if you're not working inside Emacs at the moment but want to capture a task for your inbox from Xcode or Chrome or whatever, you can actually remote-control Emacs with the <code>emacsclient</code> command-line application. That will be able to execute Lisp commands in your current Emacs session.
</p>

<p>
First, start the Emacs server with the command <code>server-start</code>. (You can execute commands with M-x, which is shorthand for Meta-x. The Meta key has to be configured first. It's my left Command key, for example.)
</p>

<p>
The template I pasted above had the key “t”, so the remote control command to use <code>org-capture</code> is this:
</p>

<pre class="example">
$ /usr/local/bin/emacsclient org-protocol://capture?template=t
</pre>

<p>
To enable recognition of <code>org-protocol://</code> as a parameter, you need to enable this optional module in Emacs, too. The module is called <code>org-protocol</code>, and the variable that holds the list of enabled modules is called <code>org-modules</code>:
</p>

<pre class="example">
(setq org-modules (quote (org-protocol)))
</pre>

<p>
I actually configured this in Emacs's “customize” tool that stores user-preferences (you can get there when you hit Cmd-, in the macOS app). Search for “Modules”, expand “Org Modules”, and select the “protocol” module. Then apply &amp; save changes.
</p>


<div class="figure">
<p><img src="https://christiantietze.de/posts/2018/05/emacs-org-mode-global-capture-macos/emacs-customize-org-modules.png" alt="emacs-customize-org-modules.png" />
</p>
</div>

<p>
Interactive Customize editor with Org Modules expanded
</p>

<p>
With the server running and the <code>org-protocol</code> enabled, the shell command will just work as if you invoked the capture template yourself, e.g. hit C-c c t.
</p>

<p>
I bound this to a Keyboard Maestro macro that replaces my global shortcut to enter a new task into OmniFocus. The macro also brings the Emacs app to front, if it isn't the frontmost app already.
</p>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2020-02-14</span>
            <span title="last modification date" class="post-info">2020-02-14</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:travis &lt;at&gt; travis-job-a7198fc9-d0c6-4570-9672-3e332dedf3b5">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
        <script>
         var _hmt = _hmt || [];
         (function() {
             var hm = document.createElement("script");
             hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
             var s = document.getElementsByTagName("script")[0]; 
             s.parentNode.insertBefore(hm, s);
         })();
        </script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-a7198fc9-d0c6-4570-9672-3e332dedf3b5">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
