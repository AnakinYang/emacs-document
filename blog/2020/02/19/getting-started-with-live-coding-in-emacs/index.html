<!DOCTYPE html>
<html lang="en">
<head>
  <title>Getting Started with Live Coding in Emacs - EMACS-DOCUMENT</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <meta name="author" content="lujun9972" />
  <meta name="keywords" content="raw" />
  <!-- <link rel="stylesheet" href="../../../../../media/css/main.css" type="text/css"/>
       <link rel="stylesheet" href="../../../../../media/css/comment.css" type="text/css"/> -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</head>

  <body><div class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="../../../../../">EMACS-DOCUMENT</a></h1>
    <p>=============&gt;随便,谢谢</p>
    <nav class="site-nav">
      <ul class="trigger">
        <li><a href="../../../../../years/">Years</a></li>
        <li><a href="../../../../../authors/">Authors</a></li>
        <li><a href="../../../../../tags/">Tags</a></li>
        <li><a href="../../../../../about/">About</a></li>
        <li><a href="https://github.com/lujun9972/emacs-document.git">Github</a></li>
        <li><a href="../../../../../rss.xml">RSS</a></li>
      </ul>
    </nav>
    <form method="get" id="searchform" action="https://www.bing.com/search">
      <input type="text" class="field" name="q" id="s" placeholder="Search">
      <input type="hidden" name="as_sitesearch" value="lujun9972.github.io/emacs-document">
    </form>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Getting Started with Live Coding in Emacs</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#live-coding-display">Live Coding Display</a></li>
</ul>
</div>
</div>
<p>
Live Coding in Python lets you run your Python code as you type it. For
example, this code prints a greeting to my friend, Alice.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
name = 'Alice'                         |name = 'Alice'
print('Hello, ' + name + '!')          |print('Hello, Alice!')
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:----F1  hello.py       All L3     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
When I change the name to Bob, the display on the right immediately changes. I don't even have to save the file.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
name = 'Bob'                           |name = 'Bob'
print('Hello, ' + name + '!')          |print('Hello, Bob!')
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
In this tutorial, I'll demonstrate two things: a live coding display that can be used to show you what's happening inside your code, and live unit tests. To try it yourself, follow the Emacs <a href="https://donkirkby.github.io/live-py-plugin/#installing-the-emacs-mode">installation instructions</a>, then type some code, as in the example above. Finally, launch the Live Python mode with <code>M-x live-py-mode</code>. You should see the display on the right. You can also watch <a href="https://www.youtube.com/watch?v=Vdr2l3yNFH4">my demo video</a>.
</p>

<div id="outline-container-orgfbba5f6" class="outline-2">
<h2 id="live-coding-display"><a id="orgfbba5f6"></a>Live Coding Display</h2>
<div class="outline-text-2" id="text-live-coding-display">
<p>
I'll start with a trivial chunk of code where I assign a variable, and then
modify it.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
s = 'Hello'
s += ', World!'



















-UU-:----F1  hello.py       All L3     (Python) --------------------------------
</pre>

<p>
That's easy to step through in your head and see that <code>s</code> is now <code>'Hello, World!'</code> Remember, though, that I want to let your brain focus on writing code instead of stepping through it.
</p>

<p>
I turn on live coding mode with <code>M-x live-py-mode</code>, and it opens the live coding display like the one on the right (below). The display shows me what's in the variable after each change.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
s = 'Hello'                            |s = 'Hello'
s += ', World!'                        |s = 'Hello, World!'
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:----F1  hello.py       All L3     |-UUU:**--F1  *live-py-trace_hello.py_227
Live-Py mode enabled in current buffer
</pre>

<p>
Let's do something more interesting and write a library function that does binary search for a value in a sorted array. The live coding will show us what's happening in our code so we don't have to hold it all in our heads.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |
    return -1                          |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L3     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
It's a bad search function that never finds anything, but let's see how it works when we call it.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 2 | a = [1, 2, 4]
    return -1                          |return -1
                                       |
                                       |
i = search(2, [1, 2, 4])               |i = -1
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L4     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
You can see the input parameters at the start of the function, and the return value at the end.
</p>

<p>
We'll start looking for the value in the array, and the first place to look is the middle item.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 2 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    mid = low + high // 2              |mid = 1
    if n == a[mid]:                    |
        return mid                     |return 1
    return -1                          |
                                       |
i = search(2, [1, 2, 4])               |i = 1
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L10    |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
That was lucky! It was in the first place we looked, and you can see the calculations as it goes. You see an abstract formula in the code, like <code>high = len(a) - 1</code>, and you see the concrete result in the live coding display, like <code>high = 2</code>. However, a search function usually won't find the item we're searching for on the first try. Let's ask for an item earlier in the list and use a while loop to find it.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 1 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while True:                        |         |
        mid = low + high // 2          |mid = 1  | mid = 0
        v = a[mid]                     |v = 2    | v = 1
        if n == v:                     |         |
            return mid                 |         | return 0
        if n &lt; v:                      |         |
            high = mid - 1             |high = 0 |
    return -1                          |
                                       |
i = search(1, [1, 2, 4])               |i = 0
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
The loop runs twice, and each run adds a column to the display showing the calculations. That's a good example of how this tool differs from a debugger. With a debugger, you're always looking at a single moment in time. Here, you can see the whole history of the search laid out on the screen, and you move back and forth through time just by moving your eye. It's a lot like the difference that makes static visualizations of sorting algorithms easier to follow than animated sorting algorithms.
</p>

<p>
Now let's look for an item later in the list.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 4 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while True:                        |        |
        mid = low + high // 2          |mid = 1 | mid = 3
        v = a[mid]                     |v = 2   | IndexError: list index out of$
        if n == v:                     |        |
            return mid                 |        |
        if n &lt; v:                      |        |
            high = mid - 1             |        |
        else:                          |        |
            low = mid + 1              |low = 2 |
    return -1                          |
                                       |
i = search(4, [1, 2, 4])               |IndexError: list index out of range
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
Oops, I get an IndexError. Without the live coding display, I would just get a traceback that shows where the error happened, but not how it happened. Now, I can walk back from the error to see where things went wrong. <code>mid</code> is the index value, and it's calculated at the top of the loop. The two values that go into it are both 2, so they should average to 2. Oh, I need parentheses to calculate the average.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 4 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while True:                        |        |
        mid = (low + high) // 2        |mid = 1 | mid = 2
        v = a[mid]                     |v = 2   | v = 4
        if n == v:                     |        |
            return mid                 |        | return 2
        if n &lt; v:                      |        |
            high = mid - 1             |        |
        else:                          |        |
            low = mid + 1              |low = 2 |
    return -1                          |
                                       |
i = search(4, [1, 2, 4])               |i = 2
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
What happens if we try to find a value that's not in the list?
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 3 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while True:                        |        |          |         |         $
        mid = (low + high) // 2        |mid = 1 | mid = 2  | mid = 1 | mid = 1 $
        v = a[mid]                     |v = 2   | v = 4    | v = 2   | v = 2   $
        if n == v:                     |        |          |         |         $
            return mid                 |        |          |         |         $
        if n &lt; v:                      |        |          |         |         $
            high = mid - 1             |        | high = 1 |         |         $
        else:                          |        |          |         |         $
            low = mid + 1              |low = 2 |          | low = 2 | low = 2 $
    return -1                          |
                                       |
i = search(3, [1, 2, 4])               |RuntimeError: live coding message limit$
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
I guess that while True wasn't such a good idea, we're stuck in an infinite loop. If you want to see some of the later loop runs, you can scroll over to the right.
</p>

<p>
From the third run on, the values in the loop don't change, so we probably want to exit from the second or third run. If you look at the end of the second run, you can see that high is lower than low. That means that we've searched all the way from both ends to meet in the middle, and it's time to give up.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 3 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while low &lt;= high:                 |        |
        mid = (low + high) // 2        |mid = 1 | mid = 2
        v = a[mid]                     |v = 2   | v = 4
        if n == v:                     |        |
            return mid                 |        |
        if n &lt; v:                      |        |
            high = mid - 1             |        | high = 1
        else:                          |        |
            low = mid + 1              |low = 2 |
    return -1                          |return -1
                                       |
i = search(3, [1, 2, 4])               |i = -1
                                       |
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L1     |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>

<p>
At this point, I think I'm done. I can add a few entries and search for them to make sure everything is working. Also, if this were a real library module, I wouldn't want to execute a call at the end of the file, so I only do it when I'm in live coding mode.
</p>

<pre class="example">
File Edit Options Buffers Tools Python Help                                     
def search(n, a):                      |n = 3 | a = [1, 2, 4]
    low = 0                            |low = 0
    high = len(a) - 1                  |high = 2
    while low &lt;= high:                 |        |
        mid = (low + high) // 2        |mid = 1 | mid = 2
        v = a[mid]                     |v = 2   | v = 4
        if n == v:                     |        |
            return mid                 |        |
        if n &lt; v:                      |        |
            high = mid - 1             |        | high = 1
        else:                          |	|
            low = mid + 1              |low = 2 |
    return -1                          |return -1
                                       |
if __name__ == '__live_coding__':      |
    i = search(3, [1, 2, 4])           |i = -1
                                       |
                                       |
                                       |
                                       |
                                       |
-UU-:**--F1  hello.py       All L16    |-UUU:**--F1  *live-py-trace_hello.py_227
</pre>
</div>
</div>

</div>
</div>
<div>
        <div class="post-meta">
            <span title="post date" class="post-info">2020-02-19</span>
            <span title="last modification date" class="post-info">2020-02-19</span>
            <span title="tags" class="post-info">:<a href="../../../../../tags/raw">raw</a>:</span>
            <span title="author" class="post-info"><a href="mailto:travis &lt;at&gt; travis-job-da2bdc1f-546e-4d15-9926-35d24e654b4b">lujun9972</a></span>
        </div>
    <script src="../../../../../media/js/jquery-2.1.3.min.js"></script>
    <script src="../../../../../media/js/md5.min.js"></script>
        <section>
            <div id="gitalk-container"></div>
            <script type="text/javascript">
             var gitalk = new Gitalk({
                 clientID: 'fdcb5d9da3f4acb4862c',
                 clientSecret: 'dd0a16312a206782cb7669dcec5e96874ab48170',
                 repo: 'lujun9972.github.com',
                 owner: 'lujun9972',
                 admin: ['lujun9972'],
                 id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                 distractionFreeMode: false  // Facebook-like distraction free mode
             })
             gitalk.render('gitalk-container')
            </script>
        </section>
    <script src="../../../../../media/js/main.js"></script>
        <script>
         var _hmt = _hmt || [];
         (function() {
             var hm = document.createElement("script");
             hm.src = "https://hm.baidu.com/hm.js?7bac4fd0247f69c27887e0d4e3aee41e";
             var s = document.getElementsByTagName("script")[0]; 
             s.parentNode.insertBefore(hm, s);
         })();
        </script>
    <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x(<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
            Copyright &copy; 2014 - <span id="footerYear"></span> <a href="mailto:travis &lt;at&gt; travis-job-da2bdc1f-546e-4d15-9926-35d24e654b4b">lujun9972</a>
            &nbsp;&nbsp;-&nbsp;&nbsp;
            Powered by <a href="https://github.com/emacs-china/ego" target="_blank">EGO</a><br/>
            <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License" class="center"></a>
            <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
    </div>
            </div>
            <script type="text/javascript"
                    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
            </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "AMS"} } });
            </script>
</div>

  </div>
  <!-- https://instant.page/
       Make your site’s pages instant in 1 minute and improve your conversion rate by 1%  -->
  <script src="../../../../../instant.page/1.1.0" type="module" integrity="sha384-EwBObn5QAxP8f09iemwAJljc+sU+eUXeL9vSBw1eNmVarwhKk2F9vBEpaN9rsrtp"></script>
  </body>
</html>
